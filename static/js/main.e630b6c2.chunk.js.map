{"version":3,"sources":["state/app/createReducer.js","state/manualTrigger/manualTriggerState.js","random.js","state/rounds/roundsState.js","state/activePrimalEvents/activePrimalEventsState.js","state/primalStorm/primalStormState.js","state/triggerDialog/triggerDialogState.js","state/eventExpansionState/eventExpansionState.js","state/userSettings/userSetingsState.js","state/app/primalMagic.reducer.js","state/app/App.reducer.js","images/primal_magic_image.png","homepage/primalMagicHomepageCard.component.js","homepage/homepage.component.js","errorPages/basicErrorMessage.component.js","errorPages/errorPage.component.js","errorPages/pageNotFoundError.component.js","common/barHeader.component.js","common/colours.js","common/linkDisplay.component.js","common/utils.js","common/variableMark.component.js","common/conditionDisplay.component.js","events/eventComponents/rodOfWonderResults/blindingColoursResult.component.js","events/eventComponents/rodOfWonderResults/butterflyStreamResult.component.js","events/eventComponents/rodOfWonderResults/colourChangeResult.component.js","common/spellDisplay.component.js","events/eventComponents/rodOfWonderResults/darknessResult.component.js","events/eventComponents/rodOfWonderResults/delusionResult.component.js","events/eventComponents/rodOfWonderResults/detectThoughtsResult.component.js","events/eventComponents/rodOfWonderResults/enlargePersonResult.component.js","events/eventComponents/rodOfWonderResults/etherealObjectResult.component.js","events/eventComponents/rodOfWonderResults/faerieFireResult.component.js","events/eventComponents/rodOfWonderResults/fireballResult.component.js","events/eventComponents/rodOfWonderResults/fleshToStoneResult.component.js","events/eventComponents/rodOfWonderResults/gemsResult.component.js","events/eventComponents/rodOfWonderResults/grassResult.component.js","events/eventComponents/rodOfWonderResults/gustOfWindResult.component.js","events/eventComponents/rodOfWonderResults/heavyRainResult.component.js","events/eventComponents/rodOfWonderResults/invisibilityResult.component.js","events/eventComponents/rodOfWonderResults/leavesResult.component.js","events/eventComponents/rodOfWonderResults/lightningBoltResult.component.js","events/eventComponents/rodOfWonderResults/reduceWielderResult.component.js","events/eventComponents/rodOfWonderResults/slowResult.component.js","events/eventComponents/rodOfWonderResults/stinkingCloud.component.js","events/eventComponents/rodOfWonderResults/summonAnimalResult.component.js","events/eventComponents/rodOfWonderResults/rodOfWonderResults.js","events/eventComponents/wonderousMagicEvent.component.js","events/eventComponents/auroraBorealisEvent.component.js","events/eventComponents/blackTentaclesEvent.component.js","events/eventComponents/boomingCannonsEvent.component.js","events/eventComponents/catchyMusicEvent.component.js","events/eventComponents/centipedesEvent.component.js","events/eventComponents/colourDrainEvent.component.js","events/eventComponents/elementalGrudgeEvent.component.js","events/eventComponents/elementalUprisingEvent.component.js","events/eventComponents/enantiomaticSelfEvent.component.js","events/eventComponents/energeticTouchEvent.component.js","events/eventComponents/energyStormEvent.component.js","events/eventComponents/extradimensionalPit.component.js","events/eventComponents/forgeOfCriticals.component.js","events/eventComponents/harmEvent.component.js","events/eventComponents/healEvent.component.js","events/eventComponents/icyDread.component.js","events/eventComponents/magicJarEvent.component.js","events/eventComponents/magneticFieldEvent.component.js","events/eventComponents/massDelusionEvent.component.js","events/eventComponents/orbOfGreaseEvent.component.js","events/eventComponents/rainOfSmallObjectsEvent.component.js","events/eventComponents/teleportationStormEvent.component.js","events/eventComponents/trippingTelekinesisEvent.component.js","events/eventComponents/utterDarknessEvent.component.js","events/eventComponents/weightlessnessEvent.component.js","events/eventComponents/zoneOfUnluckEvent.component.js","events/eventComponents/twoSimlultaneousEvents/limitedEvents.js","common/customChip.component.js","common/durationChip.component.js","common/variableChip.component.js","events/eventCardChips.component.js","events/eventCard.component.js","events/eventComponents/twoSimlultaneousEvents/twoSimultaneousEventsEvent.component.js","events/events.js","state/manualTrigger/manualTriggerState.thunk.js","manualTriggerBar/characterRow.component.js","manualTriggerBar/manageCharacters.component.js","manualTriggerBar/characterSwitch.component.js","manualTriggerBar/crInput.component.js","manualTriggerBar/manualTrigger.component.js","state/eventExpansionState/eventExpansionState.thunk.js","activePrimalEventsList/activePrimalEventsListContent.component.js","images/primal_magic_flowchart.png","activePrimalEventsList/flowchartDisplay.component.js","activePrimalEventsList/userSettings.component.js","activePrimalEventsList/activePrimalEventsListFooter.content.js","activePrimalEventsList/activePrimalEventsListHeader.component.js","activePrimalEventsList/activePrimalEventsList.component.js","state/rounds/roundsState.thunk.js","state/primalStorm/primalStormState.thunk.js","roundsBar/primalStormContent.component.js","roundsBar/roundsContent.component.js","roundsBar/roundsBar.component.js","state/triggerDialog/triggerDialogState.thunk.js","primalEventDialog/primalEventDialog.component.js","primalEventPage/primalEventPage.component.js","App.js","styles/theming.js","index.js"],"names":["createReducer","initialState","handlers","state","action","Object","prototype","hasOwnProperty","call","type","payload","characterInitialState","id","name","cl","manualTriggerInitialState","specifiedCr","character","characters","manualTriggerStateSelector","primalMagic","manualTriggerState","characterSelector","specifiedCrSelector","charactersSelector","SetManualTriggerCrType","SetManualTriggerCharacterType","SaveManualTriggerCharactersType","setManualTriggerCharacter","copyState","manualTriggerStateReducers","newState","selectedCharacter","find","c","rollPercentile","rollD","rollTableDice","rollMultipleD","diceSize","diceCount","modifier","Array","keys","reduce","total","generateRandom","min","max","rand","Math","random","round","roundsInitialState","currentRound","currentRoundSelector","roundsState","IncrementRoundType","roundsStateReducers","variableInitialState","undefined","result","description","makeConstantVariable","value","makeVariable","makeLimitedVariable","limit","primalEventInitialState","percentileRoll","cr","startRound","finalRound","variables","expanded","triggerType","activePrimalEventsSelector","activePrimalEventsState","filter","event","ExpandAllEventsType","CollapseAllEventsType","ToggleSingleExpandedType","AddActivePrimalEventType","activePrimalEventsReducers","map","activePrimalEvent","match","matchIndex","indexOf","matchToggled","push","primalStormInitialState","active","suppressed","leftArea","currentChance","calculateIncrementAndMax","increment","primalStormStateSelector","primalStormState","ResetStateType","SetActiveType","SetSuppressedType","SetLeftAreaType","SetCurrentChanceType","primalStormStateReducers","manualTriggerType","triggerDialogInitialState","open","percentile","threshold","currentEvent","triggerDialogStateSelector","triggerDialogState","SetTriggerDialogStateType","SetTriggerDialogPrimalEventType","ToggleTriggerDialogPrimalEventExpandedType","CloseTriggerDialogType","setTriggerDialogState","closeTriggerDialog","triggerDialogStateReducers","allExpandedSelector","eventExpansionState","allExpanded","SetAllExpandedStateType","setAllExpandedState","eventExpansionReducers","userSettingsStateSelector","userSettingsState","eventsAlwaysTriggerSelector","eventsAlwaysTrigger","alwaysSelectSameEventSelector","alwaysSelectSameEvent","eventAlwaysSelectedSelector","eventAlwaysSelected","alwaysSelectSameRodResultSelector","alwaysSelectSameRodResult","rodOfWonderAlwaysSelectedSelector","rodOfWonderAlwaysSelected","resetOnlyResetsRoundsSelector","resetOnlyResetsRounds","SetEventsAlwaysTriggerType","SetAlwaysSelectSameEventType","SetEventAlwaysSelectedType","SetRodResultAlwaysSelectedType","SetRodOfWonderAlwaysSelectedType","SetResetOnlyResetsRoundsType","userSettingsStateReducers","ResetAllType","ResetAllForceType","PrimalMagicReducer","AppReducer","history","combineReducers","router","connectRouter","primalMagicReducer","useStyles","makeStyles","cardHeader","textAlign","paddingTop","paddingBottom","cardActions","display","flexDirection","justifyContent","PrimalMagicHomepageCard","classes","dispatch","useDispatch","useState","primalResetOpen","setPrimalResetOpen","Card","CardHeader","className","title","to","src","primalMagicImage","CardActions","Button","component","NavLink","variant","Tooltip","onClick","Dialog","onClose","DialogContent","Typography","DialogActions","container","alignItems","height","Homepage","withStyles","message","paddingLeft","paddingRight","icon","marginRight","children","theme","titleContainer","width","color","palette","primary","main","titleText","fontWeight","fontSize","padding","maxWidth","errorTitle","PageNotFoundError","header","backgroundColor","colour","borderTopLeftRadius","borderTopRightRadius","BarHeader","Box","manualTriggerHeader","red","manualTriggerHeaderEmphasis","primalStormHeader","green","primalStormHeaderEmphasis","primalEventsHeader","indigo","userSettingsHeader","orange","userSettingsHeaderEmphasis","eventActive","eventImminant","purple","AonLink","link","noHighlight","href","target","rel","defaultProps","objectToArrayString","object","separator","entries","key","join","mark","u","includes","lightBlue","time","dist","willSave","fortSave","reflexSave","strengthCheck","weight","direction","energy","energyTypes","1","2","3","4","directions","5","6","7","8","getSave","variable","saveType","isCheck","unit","prefix","getValues","unitType","floor","getTime","getDist","getCasterLevel","getWeight","getDirection","getEnergy","getToolTip","VM","v","h","toolTip","placement","Condition","blindingColours","percentileMin","percentileMax","createVariables","length","duration","save","BlindingColoursEvent","butterflyStream","radius","butteflyCount","ButterflyStreamResult","colourChange","targets","handleTargets","colours","handleColours","ColourChangeResult","Spell","linkName","casterLevel","encodeURIComponent","darkness","diameter","distance","cardinalDirection","DarknessResult","delusion","secondDieRoll","DelusionResult","detectThoughts","DetectThoughtsResult","enlargePerson","EnlargePersonResult","etherealObject","mass","volume","EtherealObjectResult","faerieFire","FaerieFireResult","fireball","damage","FireballResult","fleshToStone","FleshToStoneResult","gems","gemCount","numberOfHits","GemsResult","grass","area","existingGrowthAmount","GrassResult","gustOfWind","GustOfWindResult","heavyRain","HeavyRainResult","invisibility","InvisibilityResult","leaves","LeavesResult","lightningBolt","LightningBoltEvent","reduceWielder","ReduceWielderResult","slow","SlowResult","stinkingCloud","StinkingCloudResult","summonAnimal","animalSummonPercentile","handleAnimalType","SummonAnimalResult","rodOfWonderResults","getRodResult","results","e","wonderousMagic","table","_","rodOfWonderEventAlwaysSelected","getRodResultByTitle","rodOfWonderPercentile","rodOfWonderVariables","WonderousMagicEvent","rodComponent","rodResult","getRodOfWonderComponent","auroraBorealis","AuroraBorealisEvent","blackTentacles","BlackTentaclesEvent","boomingCannons","misfire","BoomingCannonsEvent","catchyMusic","chantType","battleChants","handleChant","CatchyMusicEvent","centipedes","centipedeCount","handleCentipedes","CentipedesEvent","colourDrain","ColourDrainEvent","elementalGrudge","elementalType","elementalTypes","crSizes","9","11","getElementalLink","availableSizes","size","handleElementalType","ElementalGrudgeEvent","elementalUprising","elementalCount","handleElementals","ElementalUprisingEvent","enantiomaticSelf","EnantiomaticSelfEvent","energeticTouch","energyType","EnergeticTouchEvent","energyStorm","EnergyStormEvent","extradimensionalPit","depth","ExtradimensionalPitEvent","forgeOfCriticals","ForgeOfCriticalsEvent","harm","creaturesAffected","HarmEvent","heal","HealEvent","icyDread","IcyDreadEvent","magicJar","stunDuration","bodySwapDuration","MagicJarEvent","magneticField","cmb","strengthDc","MagneticFieldEvent","massDelusion","MassDelusionEvent","orbOfGrease","OrbOfGreaseEvent","rainOfSmallObjects","RainOfSmallObjectsEvent","teleportationStorm","TeleportationStormEvent","trippingTelekinesis","TrippingTelekinesisEvent","utterDarkness","UtterDarknessEvent","weightlessness","rate","WeightlessnessEvent","zoneOfUnluck","ZoneOfUnluckEvent","getLimitedEventCardContent","limitedEvents","getLimitedEvent","tableRoll","eventsInRange","chip","CustomChip","label","Chip","avatar","Avatar","DurationEndChip","useSelector","durationInMins","ceil","plural","durationInHours","durationInDays","VariableChip","EventCardChips","initiative","finalRoundDisplay","getFinalRoundOrUndefined","card","titleColour","expiresThisTurn","expandAction","marginTop","cardContent","EventCard","onExpandToggleClicked","getEventCardContent","subheader","titleTypographyProps","IconButton","disableRipple","CardContent","divider","marginBottom","prefixVariableKeys","newVariables","forEach","twoSimultaneousEvents","percentileOne","tableOne","percentileTwo","tableTwo","eventOne","eventOneVariables","eventTwo","eventTwoVariables","firstVars","secondVars","firstDuration","oneduration","secondDuration","twoduration","longestDuration","deconstructEvent","isOpen","variablePrefix","deconstructedEventVariables","startsWith","replace","removeVariableKeyPrefix","calculateFinalRound","TwoSimultaneousEventsEvent","eventOneOpen","setEventOneOpen","eventTwoOpen","setEventTwoOpen","Divider","cyan","events","durationVariable","durationInRounds","generateEventVariablesWithDefaults","crVal","rodOfWonderResultAlwaysSelected","generateDialogEvent","crVar","correspondingEvent","eventsWithTitle","getEventByTitle","getEvent","Date","now","saveManualTriggerCharactersThunk","getState","currentCharacter","saveManualTriggerCharacters","characterDataErrors","characterData","CharacterRow","onUpdate","onDelete","nameError","clError","isOtherCharacter","TableRow","TableCell","TextField","disabled","fullWidth","margin","inputProps","style","error","helperText","onChange","newData","marginLeft","number","parseInt","manageButton","blue","dialogTitle","dialogActions","headerCell","saveButton","ManageCharacters","currentCharacters","dialogOpen","setDialogOpen","data","setData","useEffect","dataHasAnyErrors","some","newEntry","entry","deleteEntry","deleteId","DialogTitle","TableContainer","Table","TableHead","TableBody","radioContainer","overflowY","overflowX","CharacterSwitch","FormControl","RadioGroup","selected","FormControlLabel","labelPlacement","control","Radio","noWrap","characterNameText","inputContainer","input","CrInput","currentCr","crError","crErrorLabel","Grid","spacing","item","InputLabelProps","hidden","footer","alignSelf","ManualTriggerBar","dialogState","alwaysShowSameRodResult","eventPercentile","toggleAllExpandedThunk","toggleSingleExpandedThunk","toggleSingleExpanded","content","overflow","ActivePrimalEventsListContent","activePrimalEvents","toggleSingleClicked","primalEvent","List","ListItem","footerButton","image","dailogPaper","maxHeight","dialogContent","FlowchartDisplay","PaperProps","primalMagicFlowchart","minWidth","dialogHeader","dropDown","UserSettings","eventIsRodOfWonder","rodResultAlwaysSelected","Checkbox","checked","Select","setEventAlwaysSelected","sort","a","b","MenuItem","setRodOfWonderAlwaysSelected","ActivePrimalEventsListFooter","subtitleContainer","subtitle","expandButton","headerText","ActivePrimalEventsListHeader","toggleAllClicked","buildExpandIcon","buildExpandButton","ActivePrimalEventsList","advanceRoundThunk","newChance","currentThreshold","currentCrVariable","activatePrimalStormThunk","isActive","setPrimalStormActive","currentChanceContainer","currentChanceText","currentChanceAvatar","toString","getColor","PrimalStormContent","makeCheckboxWithTooltip","roundsContent","resetButton","currentRoundDisplay","roundAvatar","RoundsContent","RoundsBar","confirmDialogPrimalEventThunk","triggerDialogCurrentEventSelector","dispatchedEvent","rerollDialogPrimalEventVariablesThunk","currentDialogState","reRollVariable","newDialogState","getBackgroundColour","isManualTrigger","eventOccurrance","reRollButton","justifySelf","reRollContainer","confirmButton","getEmphasisColour","PrimalEventDialog","eventsAlwaysTriggered","eventOccurred","showEventContent","eventOccuranceMessage","chanceMessage","isCapped","getChanceMessage","onCloseDialogClicked","startIcon","contentContainer","grey","buttonPage","page","pinnedEventsPage","PrimalEventPage","Paper","elevation","createHashHistory","middleware","thunk","routerMiddleware","log","ERROR","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","persistReducer","storage","applyMiddleware","persistor","persistStore","App","loading","createMuiTheme","typography","useNextVariants","singleRiskView","textField","slider","select","tabs","formControl","exact","path","render","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e630b6c2.chunk.js","sourcesContent":["function createReducer(initialState, handlers) {\r\n  // rather than define a switch statement,\r\n  // this maps the handler actions to the state and payload\r\n  return function reducer(state = initialState, action) {\r\n    if (action && Object.prototype.hasOwnProperty.call(handlers, action.type)) {\r\n      return handlers[action.type](state, action.payload);\r\n    }\r\n    return state;\r\n  };\r\n}\r\n\r\nexport default createReducer;\r\n","export const characterInitialState = {\r\n  id: 1,\r\n  name: 'Other',\r\n  cl: 11,\r\n};\r\n\r\nexport const manualTriggerInitialState = {\r\n  specifiedCr: 11,\r\n  character: { ...characterInitialState },\r\n  characters: [\r\n    { ...characterInitialState },\r\n    { ...characterInitialState, id: 2, name: 'Example', cl: 14 },\r\n  ],\r\n};\r\n\r\nexport const manualTriggerStateSelector = state =>\r\n  state.primalMagic.manualTriggerState;\r\nexport const characterSelector = state =>\r\n  manualTriggerStateSelector(state).character;\r\nexport const specifiedCrSelector = state =>\r\n  manualTriggerStateSelector(state).specifiedCr;\r\nexport const charactersSelector = state =>\r\n  manualTriggerStateSelector(state).characters;\r\n\r\nconst SetManualTriggerCrType =\r\n  'primalMagic:manualTriggerState:setManualTriggerCr';\r\nconst SetManualTriggerCharacterType =\r\n  'primalMagic:manualTriggerState:setManualTriggerCharacter';\r\nconst SaveManualTriggerCharactersType =\r\n  'primalMagic:manualTriggerState:saveManualTriggerCharacters';\r\n\r\nexport const setManualTriggerCr = cr => ({\r\n  type: SetManualTriggerCrType,\r\n  payload: cr,\r\n});\r\n\r\nexport const setManualTriggerCharacter = id => ({\r\n  type: SetManualTriggerCharacterType,\r\n  payload: id,\r\n});\r\n\r\nexport const saveManualTriggerCharacters = characters => ({\r\n  type: SaveManualTriggerCharactersType,\r\n  payload: characters,\r\n});\r\n\r\nconst copyState = state => ({\r\n  ...state,\r\n  manualTriggerState: {\r\n    ...state.manualTriggerState,\r\n  },\r\n});\r\n\r\nconst handleSetManualTriggerCr = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.manualTriggerState.specifiedCr = payload;\r\n  newState.manualTriggerState.character = { ...characterInitialState };\r\n  return newState;\r\n};\r\n\r\nconst handleSetManualTriggerCharacter = (state, payload) => {\r\n  const newState = copyState(state);\r\n  const availableCharacters = state.manualTriggerState.characters;\r\n  const selectedCharacter = availableCharacters.find(c => c.id == payload);\r\n  newState.manualTriggerState.character = selectedCharacter;\r\n  if (selectedCharacter.id !== characterInitialState.id) {\r\n    newState.manualTriggerState.specifiedCr = selectedCharacter.cl;\r\n  }\r\n\r\n  return newState;\r\n};\r\n\r\nconst handleSaveManualTriggerCharacters = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.manualTriggerState.characters = payload;\r\n  return newState;\r\n};\r\n\r\nexport const manualTriggerStateReducers = {\r\n  [SetManualTriggerCrType]: handleSetManualTriggerCr,\r\n  [SetManualTriggerCharacterType]: handleSetManualTriggerCharacter,\r\n  [SaveManualTriggerCharactersType]: handleSaveManualTriggerCharacters,\r\n};\r\n","export const rollPercentile = () => rollD(100);\r\n\r\nexport const rollTableDice = () => rollD(2); // Roll 1d2 to determine whether to use event table 1 or 2\r\n\r\nexport const rollMultipleD = (diceSize, diceCount = 1, modifier = 0) =>\r\n  [...Array(diceCount + 1).keys()].reduce(total => total + rollD(diceSize)) +\r\n  modifier;\r\n\r\nexport const rollD = diceSize => generateRandom(1, diceSize);\r\n\r\nexport const generateRandom = (min, max) => {\r\n  const rand = min + Math.random() * (max - min);\r\n  return Math.round(rand);\r\n};\r\n","export const roundsInitialState = {\r\n  currentRound: 0,\r\n};\r\n\r\nexport const currentRoundSelector = state =>\r\n  state.primalMagic.roundsState.currentRound;\r\n\r\nconst IncrementRoundType = 'primalMagic:roundsState:incrementRound';\r\n\r\nexport const incrementRound = () => ({\r\n  type: IncrementRoundType,\r\n});\r\n\r\nconst handleIncrementRound = state => ({\r\n  ...state,\r\n  roundsState: {\r\n    ...state.roundsState,\r\n    currentRound: state.roundsState.currentRound + 1,\r\n  },\r\n});\r\n\r\nexport const roundsStateReducers = {\r\n  [IncrementRoundType]: handleIncrementRound,\r\n};\r\n","import { rollD, rollMultipleD } from '../../random';\r\nimport { currentRoundSelector } from '../rounds/roundsState';\r\n\r\nexport const variableInitialState = {\r\n  diceSize: undefined,\r\n  diceCount: undefined,\r\n  modifier: undefined,\r\n  result: undefined,\r\n  description: undefined,\r\n};\r\n\r\nexport const makeConstantVariable = (\r\n  value,\r\n  description = undefined,\r\n  type = undefined\r\n) => ({\r\n  ...variableInitialState,\r\n  diceSize: 0,\r\n  diceCount: 0,\r\n  modifier: value,\r\n  result: value,\r\n  description,\r\n  type,\r\n});\r\n\r\nexport const makeVariable = (\r\n  diceSize,\r\n  diceCount = 1,\r\n  modifier = 0,\r\n  description = undefined\r\n) => ({\r\n  ...variableInitialState,\r\n  diceSize: diceSize,\r\n  diceCount: diceCount,\r\n  modifier: modifier,\r\n  result: rollMultipleD(diceSize, diceCount, modifier),\r\n  description,\r\n});\r\n\r\nexport const makeLimitedVariable = (diceSize, limit) => ({\r\n  ...variableInitialState,\r\n  diceSize: diceSize,\r\n  result: Math.min(rollD(diceSize), limit),\r\n});\r\n\r\nexport const reRollVariable = variable => ({\r\n  ...variable,\r\n  result: rollMultipleD(\r\n    variable.diceSize,\r\n    variable.diceCount,\r\n    variable.modifier\r\n  ),\r\n});\r\n\r\nexport const primalEventInitialState = {\r\n  id: undefined,\r\n  percentileRoll: undefined,\r\n  cr: { ...variableInitialState },\r\n  startRound: undefined,\r\n  finalRound: undefined,\r\n  variables: [],\r\n  expanded: true,\r\n  triggerType: undefined,\r\n};\r\n\r\nexport const activePrimalEventsInitialState = [];\r\n\r\nexport const activePrimalEventsSelector = state =>\r\n  state.primalMagic.activePrimalEventsState.filter(\r\n    event => event.finalRound >= currentRoundSelector(state)\r\n  );\r\nexport const activePrimalEventSelector = id => state =>\r\n  activePrimalEventsSelector(state).find(primalEvent => primalEvent.id === id);\r\nexport const activePrimalEventIsExpandedSelector = id => state =>\r\n  activePrimalEventSelector(id)(state).expanded;\r\n\r\nconst ExpandAllEventsType = 'primalMagic:activePrimalEvents:expandAllEvents';\r\nconst CollapseAllEventsType =\r\n  'primalMagic:activePrimalEvents:collapseAllEvents';\r\nconst ToggleSingleExpandedType =\r\n  'primalMagic:activePrimalEvents:toggleSingleExpanded';\r\nconst AddActivePrimalEventType =\r\n  'primalMagic:activePrimalEvents:addActivePrimalEvent';\r\n\r\nexport const expandAll = () => ({\r\n  type: ExpandAllEventsType,\r\n});\r\n\r\nexport const collapseAll = () => ({\r\n  type: CollapseAllEventsType,\r\n});\r\n\r\nexport const toggleSingleExpanded = id => ({\r\n  type: ToggleSingleExpandedType,\r\n  payload: id,\r\n});\r\n\r\nexport const addActivePrimalEvent = primalEvent => ({\r\n  type: AddActivePrimalEventType,\r\n  payload: primalEvent,\r\n});\r\n\r\nconst copyState = state => ({\r\n  ...state,\r\n  activePrimalEventsState: [...state.activePrimalEventsState],\r\n});\r\n\r\nconst handleExpandAll = state => {\r\n  const newState = copyState(state);\r\n  newState.activePrimalEventsState = newState.activePrimalEventsState.map(\r\n    activePrimalEvent => ({ ...activePrimalEvent, expanded: true })\r\n  );\r\n\r\n  return newState;\r\n};\r\n\r\nconst handleCollapseAll = state => {\r\n  const newState = copyState(state);\r\n  newState.activePrimalEventsState = newState.activePrimalEventsState.map(\r\n    activePrimalEvent => ({ ...activePrimalEvent, expanded: false })\r\n  );\r\n\r\n  return newState;\r\n};\r\n\r\nconst handleToggleSingleExpanded = (state, payload) => {\r\n  const newState = copyState(state);\r\n  const match = newState.activePrimalEventsState.find(\r\n    activePrimalEvent => activePrimalEvent.id === payload\r\n  );\r\n\r\n  if (!match) {\r\n    return newState;\r\n  }\r\n\r\n  const matchIndex = newState.activePrimalEventsState.indexOf(match);\r\n  const matchToggled = { ...match, expanded: !match.expanded };\r\n  newState.activePrimalEventsState[matchIndex] = matchToggled;\r\n  return newState;\r\n};\r\n\r\nconst handleAddActivePrimalEvent = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.activePrimalEventsState.push(payload);\r\n  return newState;\r\n};\r\n\r\nexport const activePrimalEventsReducers = {\r\n  [ExpandAllEventsType]: handleExpandAll,\r\n  [CollapseAllEventsType]: handleCollapseAll,\r\n  [ToggleSingleExpandedType]: handleToggleSingleExpanded,\r\n  [AddActivePrimalEventType]: handleAddActivePrimalEvent,\r\n};\r\n","export const primalStormInitialState = {\r\n  active: false,\r\n  suppressed: false,\r\n  leftArea: false,\r\n  currentChance: 10,\r\n};\r\n\r\nexport const calculateIncrementAndMax = (suppressed, leftArea) => {\r\n  let increment = 10;\r\n  let max = 100;\r\n\r\n  if (suppressed) {\r\n    increment = 5;\r\n    max = 50;\r\n  }\r\n\r\n  if (leftArea) {\r\n    increment = 0;\r\n  }\r\n\r\n  return { increment, max };\r\n};\r\n\r\nexport const primalStormStateSelector = state =>\r\n  state.primalMagic.primalStormState;\r\nexport const primalStormActiveSelector = state =>\r\n  primalStormStateSelector(state).active;\r\nexport const primalStormSuppressedSelector = state =>\r\n  primalStormStateSelector(state).suppressed;\r\nexport const primalStormLeftAreaSelector = state =>\r\n  primalStormStateSelector(state).leftArea;\r\nexport const primalStormCurrentChanceSelector = state =>\r\n  primalStormStateSelector(state).currentChance;\r\n\r\nconst ResetStateType = 'primalMagic:primalStormState:resetStateType';\r\nconst SetActiveType = 'primalMagic:primalStormState:setActiveType';\r\nconst SetSuppressedType = 'primalMagic:primalStormState:setSuppressedType';\r\nconst SetLeftAreaType = 'primalMagic:primalStormState:setLeftAreaType';\r\nconst SetCurrentChanceType =\r\n  'primalMagic:primalStormState:setCurrentChanceType';\r\n\r\nexport const resetPrimalStormState = () => ({\r\n  type: ResetStateType,\r\n});\r\n\r\nexport const setPrimalStormActive = isActive => ({\r\n  type: SetActiveType,\r\n  payload: isActive,\r\n});\r\n\r\nexport const setPrimalStormSuppressed = isSuppressed => ({\r\n  type: SetSuppressedType,\r\n  payload: isSuppressed,\r\n});\r\n\r\nexport const setPrimalStormLeftArea = haveLeftArea => ({\r\n  type: SetLeftAreaType,\r\n  payload: haveLeftArea,\r\n});\r\n\r\nexport const setPrimalStormCurrentChance = chance => ({\r\n  type: SetCurrentChanceType,\r\n  payload: chance,\r\n});\r\n\r\nconst copyState = state => ({\r\n  ...state,\r\n  primalStormState: {\r\n    ...state.primalStormState,\r\n  },\r\n});\r\n\r\nconst handleResetPrimalStormState = state => ({\r\n  ...state,\r\n  primalStormState: {\r\n    ...primalStormInitialState,\r\n  },\r\n});\r\n\r\nconst handleSetPrimalStormActive = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.primalStormState.active = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetPrimalStormSuppressed = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.primalStormState.suppressed = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetPrimalStormLeftArea = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.primalStormState.leftArea = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetPrimalStormCurrentChance = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.primalStormState.currentChance = payload;\r\n  return newState;\r\n};\r\n\r\nexport const primalStormStateReducers = {\r\n  [ResetStateType]: handleResetPrimalStormState,\r\n  [SetActiveType]: handleSetPrimalStormActive,\r\n  [SetSuppressedType]: handleSetPrimalStormSuppressed,\r\n  [SetLeftAreaType]: handleSetPrimalStormLeftArea,\r\n  [SetCurrentChanceType]: handleSetPrimalStormCurrentChance,\r\n};\r\n","export const manualTriggerType = 'MANUAL';\r\nexport const stormTrigerType = 'STORM';\r\n\r\nexport const triggerDialogInitialState = {\r\n  open: false,\r\n  triggerType: undefined,\r\n  percentile: 0,\r\n  threshold: 50,\r\n  cr: undefined,\r\n  currentEvent: undefined,\r\n};\r\n\r\nexport const triggerDialogStateSelector = state =>\r\n  state.primalMagic.triggerDialogState;\r\nexport const triggerDialogCurrentEventSelector = state =>\r\n  triggerDialogStateSelector(state).currentEvent;\r\n\r\nconst SetTriggerDialogStateType =\r\n  'primalMagic:triggerDialogState:setTriggerDialogState';\r\nconst SetTriggerDialogPrimalEventType =\r\n  'primalMagic:triggerDialogState:setTriggerDialogPrimalEvent';\r\nconst ToggleTriggerDialogPrimalEventExpandedType =\r\n  'primalMagic:triggerDialogState:toggleTriggerDialogPrimalEventExpanded';\r\nconst CloseTriggerDialogType =\r\n  'primalMagic:triggerDialogState:closeTriggerDialog';\r\n\r\nexport const setTriggerDialogState = triggerDialogState => ({\r\n  type: SetTriggerDialogStateType,\r\n  payload: triggerDialogState,\r\n});\r\n\r\nexport const setTriggerDialogPrimalEvent = primalEvent => ({\r\n  type: SetTriggerDialogPrimalEventType,\r\n  payload: primalEvent,\r\n});\r\n\r\nexport const toggleTriggerDialogPrimalEventExpanded = () => ({\r\n  type: ToggleTriggerDialogPrimalEventExpandedType,\r\n});\r\n\r\nexport const closeTriggerDialog = () => ({\r\n  type: CloseTriggerDialogType,\r\n});\r\n\r\nconst handleSetTriggerDialogState = (state, payload) => ({\r\n  ...state,\r\n  triggerDialogState: {\r\n    ...payload,\r\n  },\r\n});\r\n\r\nconst handleSetTriggerDialogPrimalEvent = (state, payload) => ({\r\n  ...state,\r\n  triggerDialogState: {\r\n    ...state.triggerDialogState,\r\n    currentEvent: payload,\r\n  },\r\n});\r\n\r\nconst handleToggleTriggerDialogPrimalEventExpanded = state => ({\r\n  ...state,\r\n  triggerDialogState: {\r\n    ...state.triggerDialogState,\r\n    currentEvent: {\r\n      ...state.triggerDialogState.currentEvent,\r\n      expanded: !state.triggerDialogState.currentEvent.expanded,\r\n    },\r\n  },\r\n});\r\n\r\nconst handleCloseTriggerDialog = state => ({\r\n  ...state,\r\n  triggerDialogState: {\r\n    ...triggerDialogInitialState,\r\n  },\r\n});\r\n\r\nexport const triggerDialogStateReducers = {\r\n  [SetTriggerDialogStateType]: handleSetTriggerDialogState,\r\n  [SetTriggerDialogPrimalEventType]: handleSetTriggerDialogPrimalEvent,\r\n  [ToggleTriggerDialogPrimalEventExpandedType]: handleToggleTriggerDialogPrimalEventExpanded,\r\n  [CloseTriggerDialogType]: handleCloseTriggerDialog,\r\n};\r\n","export const eventExpansionInitialState = {\r\n  allExpanded: true,\r\n};\r\n\r\nexport const allExpandedSelector = state =>\r\n  state.primalMagic.eventExpansionState.allExpanded;\r\n\r\nconst SetAllExpandedStateType =\r\n  'primalMagic:activePrimalEvents:setAllExpandedState';\r\n\r\nexport const setAllExpandedState = allExpanded => ({\r\n  type: SetAllExpandedStateType,\r\n  payload: allExpanded,\r\n});\r\n\r\nconst handleSetAllExpanded = (state, payload) => {\r\n  return {\r\n    ...state,\r\n    eventExpansionState: {\r\n      ...state.eventExpansionState,\r\n      allExpanded: payload,\r\n    },\r\n  };\r\n};\r\n\r\nexport const eventExpansionReducers = {\r\n  [SetAllExpandedStateType]: handleSetAllExpanded,\r\n};\r\n","export const userSettingsInitialState = {\r\n  eventsAlwaysTrigger: false,\r\n  alwaysSelectSameEvent: false,\r\n  eventAlwaysSelected: 'Colour Drain',\r\n  alwaysSelectSameRodResult: false,\r\n  rodOfWonderAlwaysSelected: 'Slow',\r\n  resetOnlyResetsRounds: false,\r\n};\r\n\r\nexport const userSettingsStateSelector = state =>\r\n  state.primalMagic.userSettingsState;\r\nexport const eventsAlwaysTriggerSelector = state =>\r\n  userSettingsStateSelector(state).eventsAlwaysTrigger;\r\nexport const alwaysSelectSameEventSelector = state =>\r\n  userSettingsStateSelector(state).alwaysSelectSameEvent;\r\nexport const eventAlwaysSelectedSelector = state =>\r\n  userSettingsStateSelector(state).eventAlwaysSelected;\r\nexport const alwaysSelectSameRodResultSelector = state =>\r\n  userSettingsStateSelector(state).alwaysSelectSameRodResult;\r\nexport const rodOfWonderAlwaysSelectedSelector = state =>\r\n  userSettingsStateSelector(state).rodOfWonderAlwaysSelected;\r\nexport const resetOnlyResetsRoundsSelector = state =>\r\n  userSettingsStateSelector(state).resetOnlyResetsRounds;\r\n\r\nconst SetEventsAlwaysTriggerType =\r\n  'primalMagic:userSettingsState:setEventsAlwaysTrigger';\r\nconst SetAlwaysSelectSameEventType =\r\n  'primalMagic:userSettingsState:setAlwaysSelectSameEvent';\r\nconst SetEventAlwaysSelectedType =\r\n  'primalMagic:userSettingsState:setEventAlwaysSelected';\r\nconst SetRodResultAlwaysSelectedType =\r\n  'primalMagic:userSettingsState:setRodResultAlwaysSelected';\r\nconst SetRodOfWonderAlwaysSelectedType =\r\n  'primalMagic:userSettingsState:setRodOfWonderAlwaysSelected';\r\nconst SetResetOnlyResetsRoundsType =\r\n  'primalMagic:userSettingsState:setResetOnlyResetsRounds';\r\n\r\nexport const setEventsAlwaysTrigger = shouldAlwaysTrigger => ({\r\n  type: SetEventsAlwaysTriggerType,\r\n  payload: shouldAlwaysTrigger,\r\n});\r\n\r\nexport const setAlwaysSelectSameEvent = alwaysSelectSame => ({\r\n  type: SetAlwaysSelectSameEventType,\r\n  payload: alwaysSelectSame,\r\n});\r\n\r\nexport const setEventAlwaysSelected = eventAlwaysSelected => ({\r\n  type: SetEventAlwaysSelectedType,\r\n  payload: eventAlwaysSelected,\r\n});\r\n\r\nexport const setAlwaysSelectSameRodResult = alwaysSelectSame => ({\r\n  type: SetRodResultAlwaysSelectedType,\r\n  payload: alwaysSelectSame,\r\n});\r\n\r\nexport const setRodOfWonderAlwaysSelected = rodOfWonderAlwaysSelected => ({\r\n  type: SetRodOfWonderAlwaysSelectedType,\r\n  payload: rodOfWonderAlwaysSelected,\r\n});\r\n\r\nexport const setResetOnlyResetsRounds = onlyResetsRounds => ({\r\n  type: SetResetOnlyResetsRoundsType,\r\n  payload: onlyResetsRounds,\r\n});\r\n\r\nconst copyState = state => ({\r\n  ...state,\r\n  userSettingsState: {\r\n    ...state.userSettingsState,\r\n  },\r\n});\r\n\r\nconst handleSetEventsAlwaysTrigger = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.userSettingsState.eventsAlwaysTrigger = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetAlwaysSelectSameEvent = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.userSettingsState.alwaysSelectSameEvent = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetEventAlwaysSelected = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.userSettingsState.eventAlwaysSelected = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetAlwaysSelectSameRodResult = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.userSettingsState.alwaysSelectSameRodResult = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetRodOfWonderAlwaysSelected = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.userSettingsState.rodOfWonderAlwaysSelected = payload;\r\n  return newState;\r\n};\r\n\r\nconst handleSetResetOnlyResetsRounds = (state, payload) => {\r\n  const newState = copyState(state);\r\n  newState.userSettingsState.resetOnlyResetsRounds = payload;\r\n  return newState;\r\n};\r\n\r\nexport const userSettingsStateReducers = {\r\n  [SetEventsAlwaysTriggerType]: handleSetEventsAlwaysTrigger,\r\n  [SetAlwaysSelectSameEventType]: handleSetAlwaysSelectSameEvent,\r\n  [SetEventAlwaysSelectedType]: handleSetEventAlwaysSelected,\r\n  [SetRodResultAlwaysSelectedType]: handleSetAlwaysSelectSameRodResult,\r\n  [SetRodOfWonderAlwaysSelectedType]: handleSetRodOfWonderAlwaysSelected,\r\n  [SetResetOnlyResetsRoundsType]: handleSetResetOnlyResetsRounds,\r\n};\r\n","import createReducer from './createReducer';\r\nimport {\r\n  manualTriggerInitialState,\r\n  manualTriggerStateReducers,\r\n} from '../manualTrigger/manualTriggerState';\r\nimport {\r\n  activePrimalEventsInitialState,\r\n  activePrimalEventsReducers,\r\n} from '../activePrimalEvents/activePrimalEventsState';\r\nimport {\r\n  primalStormInitialState,\r\n  primalStormStateReducers,\r\n} from '../primalStorm/primalStormState';\r\nimport {\r\n  triggerDialogInitialState,\r\n  triggerDialogStateReducers,\r\n} from '../triggerDialog/triggerDialogState';\r\nimport {\r\n  eventExpansionInitialState,\r\n  eventExpansionReducers,\r\n} from '../eventExpansionState/eventExpansionState';\r\nimport { roundsInitialState, roundsStateReducers } from '../rounds/roundsState';\r\nimport {\r\n  userSettingsInitialState,\r\n  userSettingsStateReducers,\r\n} from '../userSettings/userSetingsState';\r\n\r\nexport const initialState = {\r\n  activePrimalEventsState: [...activePrimalEventsInitialState],\r\n  eventExpansionState: {\r\n    ...eventExpansionInitialState,\r\n  },\r\n  manualTriggerState: {\r\n    ...manualTriggerInitialState,\r\n  },\r\n  primalStormState: {\r\n    ...primalStormInitialState,\r\n  },\r\n  roundsState: {\r\n    ...roundsInitialState,\r\n  },\r\n  triggerDialogState: {\r\n    ...triggerDialogInitialState,\r\n  },\r\n  userSettingsState: {\r\n    ...userSettingsInitialState,\r\n  },\r\n};\r\n\r\nconst ResetAllType = 'primalMagic:resetAll';\r\nconst ResetAllForceType = 'primalMagic:resetAllForce';\r\n\r\nexport const resetAll = () => ({\r\n  type: ResetAllType,\r\n});\r\n\r\nexport const resetPrimalMagic = () => ({\r\n  type: ResetAllForceType,\r\n});\r\n\r\nconst handleResetAll = state => {\r\n  if (state?.userSettingsState?.resetOnlyResetsRounds) {\r\n    return {\r\n      ...state,\r\n      roundsState: { ...roundsInitialState },\r\n    };\r\n  }\r\n\r\n  return {\r\n    ...initialState,\r\n    userSettingsState: { ...state.userSettingsState },\r\n    manualTriggerState: { ...state.manualTriggerState },\r\n  };\r\n};\r\n\r\nexport const handleResetAllForce = () => {\r\n  return {\r\n    ...initialState,\r\n  };\r\n};\r\n\r\nconst PrimalMagicReducer = createReducer(initialState, {\r\n  [ResetAllType]: handleResetAll,\r\n  [ResetAllForceType]: handleResetAllForce,\r\n  ...eventExpansionReducers,\r\n  ...activePrimalEventsReducers,\r\n  ...manualTriggerStateReducers,\r\n  ...roundsStateReducers,\r\n  ...triggerDialogStateReducers,\r\n  ...userSettingsStateReducers,\r\n  ...primalStormStateReducers,\r\n});\r\n\r\nexport default PrimalMagicReducer;\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router';\r\nimport primalMagicReducer from './primalMagic.reducer';\r\n\r\nconst AppReducer = history =>\r\n  combineReducers({\r\n    router: connectRouter(history),\r\n    primalMagic: primalMagicReducer,\r\n  });\r\n\r\nexport default AppReducer;\r\n","export default __webpack_public_path__ + \"static/media/primal_magic_image.ee62c26d.png\";","import {\r\n  Button,\r\n  Card,\r\n  CardActions,\r\n  CardHeader,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  makeStyles,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport primalMagicImage from '../images/primal_magic_image.png';\r\nimport { resetPrimalMagic } from '../state/app/primalMagic.reducer';\r\n\r\nconst useStyles = makeStyles({\r\n  cardHeader: {\r\n    textAlign: 'center',\r\n    paddingTop: 5,\r\n    paddingBottom: 5,\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n});\r\n\r\nconst PrimalMagicHomepageCard = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const [primalResetOpen, setPrimalResetOpen] = useState(false);\r\n\r\n  const onResetConfirmed = () => {\r\n    dispatch(resetPrimalMagic());\r\n    setPrimalResetOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader\r\n        className={classes.cardHeader}\r\n        title={'Primal Magic Utility'}\r\n      />\r\n      <NavLink to=\"/PrimalMagicTracker\">\r\n        <img src={primalMagicImage} />\r\n      </NavLink>\r\n      <CardActions className={classes.cardActions}>\r\n        <Button\r\n          component={NavLink}\r\n          variant=\"contained\"\r\n          to=\"/PrimalMagicTracker\"\r\n        >\r\n          Visit\r\n        </Button>\r\n        <Tooltip\r\n          title={\r\n            'Resets all data to default, removing any existing data ' +\r\n            'such as settings, characters and active events. May be ' +\r\n            'useful in the unlikely event that you encounter an error ' +\r\n            'and/or the data has become corrupted'\r\n          }\r\n        >\r\n          <Button variant=\"contained\" onClick={() => setPrimalResetOpen(true)}>\r\n            Delete Data\r\n          </Button>\r\n        </Tooltip>\r\n        <Dialog\r\n          open={primalResetOpen}\r\n          onClose={() => setPrimalResetOpen(false)}\r\n        >\r\n          <DialogContent>\r\n            <Typography variant=\"h6\">\r\n              Are you sure you wish to delete all primal magic data?\r\n            </Typography>\r\n            <Typography variant=\"subtitle\">\r\n              This includes settings, characters, and active events\r\n            </Typography>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button variant=\"contained\" onClick={onResetConfirmed}>\r\n              Yes\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={() => setPrimalResetOpen(false)}\r\n            >\r\n              No\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default PrimalMagicHomepageCard;\r\n","import { makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport PrimalMagicHomepageCard from './primalMagicHomepageCard.component';\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: '100%',\r\n  },\r\n  cardHeader: {\r\n    textAlign: 'center',\r\n    paddingTop: 5,\r\n    paddingBottom: 5,\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n});\r\n\r\nconst Homepage = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <PrimalMagicHomepageCard />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\n\r\nconst styles = {\r\n  message: {\r\n    paddingLeft: 24,\r\n    paddingRight: 24,\r\n    paddingTop: 10,\r\n    display: 'flex',\r\n  },\r\n  icon: {\r\n    marginRight: 10,\r\n  },\r\n};\r\n\r\nconst BasicErrorMessage = ({ classes, children }) => (\r\n  <div className={classes.message}>\r\n    <ErrorIcon className={classes.icon} />\r\n    <Typography variant=\"body1\">{children}</Typography>\r\n  </div>\r\n);\r\n\r\nexport default withStyles(styles)(BasicErrorMessage);\r\n","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n  titleContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  icon: {\r\n    width: '10vw',\r\n    height: '10vw',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  titleText: {\r\n    fontWeight: 'bold',\r\n    fontSize: '10vw',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  message: {\r\n    padding: 15,\r\n    maxWidth: 600,\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\nconst ErrorPage = ({ classes, children, errorTitle }) => (\r\n  <div>\r\n    <div className={classes.titleContainer}>\r\n      <Typography className={classes.titleText}>{errorTitle}</Typography>\r\n    </div>\r\n    <div className={classes.container}>{children}</div>\r\n  </div>\r\n);\r\n\r\nexport default withStyles(styles)(ErrorPage);\r\n","import React from 'react';\r\nimport BasicErrorMessage from './basicErrorMessage.component';\r\nimport ErrorPage from './errorPage.component';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst PageNotFoundError = () => (\r\n  <ErrorPage errorTitle=\"404\">\r\n    <BasicErrorMessage>\r\n      Page not found. Please check the page address for typos. Click{' '}\r\n      <NavLink to=\"/\">here</NavLink> to return to the home page.\r\n    </BasicErrorMessage>\r\n  </ErrorPage>\r\n);\r\n\r\nexport default PageNotFoundError;\r\n","import React from 'react';\r\nimport { Box, makeStyles, Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  header: {\r\n    paddingTop: 20,\r\n    paddingBottom: 20,\r\n    width: '100%',\r\n    textAlign: 'center',\r\n    backgroundColor: ({ colour }) => colour,\r\n    color: 'white',\r\n    borderTopLeftRadius: 2,\r\n    borderTopRightRadius: 2,\r\n  },\r\n});\r\n\r\nconst BarHeader = ({ title, colour }) => {\r\n  const classes = useStyles({ colour });\r\n\r\n  return (\r\n    <Box className={classes.header}>\r\n      <Typography variant=\"h4\">{title}</Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BarHeader;\r\n","import { green, indigo, orange, purple, red } from '@material-ui/core/colors';\r\n\r\nexport const manualTriggerHeader = red[500];\r\nexport const manualTriggerHeaderEmphasis = red[600];\r\nexport const primalStormHeader = green[500];\r\nexport const primalStormHeaderEmphasis = green[600];\r\nexport const primalEventsHeader = indigo[500];\r\nexport const userSettingsHeader = orange[500];\r\nexport const userSettingsHeaderEmphasis = orange[600];\r\nexport const eventActive = primalEventsHeader;\r\nexport const eventImminant = purple[500];\r\n","import React, { Fragment } from 'react';\r\n\r\nconst AonLink = ({ name, link, noHighlight }) => {\r\n  if (noHighlight) {\r\n    return (\r\n      <Fragment>\r\n        <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n          {name}\r\n        </a>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <mark>\r\n        <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n          {name}\r\n        </a>\r\n      </mark>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nAonLink.defaultProps = {\r\n  noHighlight: false,\r\n};\r\n\r\nexport default AonLink;\r\n","export const booleanToString = boolVal =>\n  boolVal === undefined ? '-' : boolVal ? 'true' : 'false';\n\nexport const objectToArrayString = (object, separator = '; ') => {\n  return Object.entries(object)\n    .map(([key, value]) => `${key}=${value}`)\n    .join(separator);\n};\n","import { makeStyles, Tooltip } from '@material-ui/core';\r\nimport { lightBlue } from '@material-ui/core/colors';\r\nimport React from 'react';\r\nimport { objectToArrayString } from './utils';\r\n\r\nconst useStyles = makeStyles({\r\n  mark: {\r\n    backgroundColor: ({ u }) =>\r\n      u?.includes('SAVE') ? 'yellow' : lightBlue[50],\r\n  },\r\n});\r\n\r\nexport const time = 'TIME';\r\nexport const dist = 'DISTANCE';\r\nexport const willSave = 'WILL_SAVE';\r\nexport const fortSave = 'FORT_SAVE';\r\nexport const reflexSave = 'REFLEX_SAVE';\r\nexport const strengthCheck = 'STRENGTH_CHECK';\r\nexport const cl = 'CASTER_LEVEL';\r\nexport const weight = 'WEIGHT';\r\nexport const direction = 'DIRECTION';\r\nexport const energy = 'ENERGY';\r\n\r\nconst energyTypes = {\r\n  1: 'acid',\r\n  2: 'cold',\r\n  3: 'electricity',\r\n  4: 'fire',\r\n};\r\n\r\nconst directions = {\r\n  1: 'north',\r\n  2: 'north east',\r\n  3: 'east',\r\n  4: 'south east',\r\n  5: 'south',\r\n  6: 'south west',\r\n  7: 'west',\r\n  8: 'north west',\r\n};\r\n\r\nconst getEnergy = variable => {\r\n  return {\r\n    value: energyTypes[variable.result],\r\n    unit: 'energy',\r\n  };\r\n};\r\n\r\nconst getDirection = variable => {\r\n  return {\r\n    value: directions[Math.floor(variable.result, 8)],\r\n  };\r\n};\r\n\r\nconst getWeight = variable => {\r\n  return {\r\n    value: variable.result,\r\n    unit: `lb${variable.result > 1 ? 's' : ''}`,\r\n  };\r\n};\r\n\r\nconst getCasterLevel = variable => {\r\n  return {\r\n    prefix: 'Caster Level',\r\n    value: variable.result,\r\n  };\r\n};\r\n\r\nconst getTime = variable => {\r\n  let value = variable.result;\r\n  let unit = `round${value > 1 ? 's' : ''}`;\r\n\r\n  if (value >= 24 * 60 * 10) {\r\n    value = Math.floor(value / (24 * 60 * 10));\r\n    unit = `day${value > 1 ? 's' : ''}`;\r\n  } else if (value >= 60 * 10) {\r\n    value = Math.floor(value / (60 * 10));\r\n    unit = `hour${value > 1 ? 's' : ''}`;\r\n  } else if (value > 20) {\r\n    value = Math.floor(value / 10);\r\n    unit = `minute${value > 1 ? 's' : ''}`;\r\n  }\r\n\r\n  return {\r\n    value,\r\n    unit,\r\n  };\r\n};\r\n\r\nconst getDist = variable => {\r\n  const value = variable.result;\r\n  const unit = 'ft.';\r\n\r\n  return {\r\n    value,\r\n    unit,\r\n  };\r\n};\r\n\r\nconst getSave = (variable, saveType, isCheck = false) => {\r\n  const value = variable.result;\r\n  const unit = `${saveType} ${isCheck ? 'Check' : 'Save'}`;\r\n\r\n  return {\r\n    prefix: 'DC ',\r\n    value,\r\n    unit,\r\n  };\r\n};\r\n\r\nconst getValues = (variable, unitType) => {\r\n  if (unitType === time) {\r\n    return getTime(variable);\r\n  }\r\n\r\n  if (unitType === dist) {\r\n    return getDist(variable);\r\n  }\r\n\r\n  if (unitType === willSave) {\r\n    return getSave(variable, 'Will');\r\n  }\r\n\r\n  if (unitType === fortSave) {\r\n    return getSave(variable, 'Fortitude');\r\n  }\r\n\r\n  if (unitType === reflexSave) {\r\n    return getSave(variable, 'Reflex');\r\n  }\r\n\r\n  if (unitType === strengthCheck) {\r\n    return getSave(variable, 'Strength', true);\r\n  }\r\n\r\n  if (unitType === cl) {\r\n    return getCasterLevel(variable);\r\n  }\r\n\r\n  if (unitType === weight) {\r\n    return getWeight(variable);\r\n  }\r\n\r\n  if (unitType === direction) {\r\n    return getDirection(variable);\r\n  }\r\n\r\n  if (unitType === energy) {\r\n    return getEnergy(variable);\r\n  }\r\n\r\n  return {\r\n    value: variable.result,\r\n    unit: undefined,\r\n  };\r\n};\r\n\r\nexport const getToolTip = (variable, unit) => {\r\n  if (variable.description) {\r\n    return variable.description;\r\n  }\r\n\r\n  if (unit === direction) {\r\n    return `1d8 [${variable.result}]: ${objectToArrayString(directions)}`;\r\n  }\r\n\r\n  if (unit === energy) {\r\n    return `1d4 [${variable.result}]: ${objectToArrayString(energyTypes)}`;\r\n  }\r\n\r\n  let modifier = `+ ${variable.modifier}`;\r\n\r\n  if (!variable.modifier) {\r\n    modifier = '';\r\n  } else if (variable.modifier < 0) {\r\n    modifier = `- ${variable.modifier}`;\r\n  }\r\n\r\n  return `${variable.diceCount}d${variable.diceSize} [${variable.result -\r\n    variable.modifier}] ${modifier}`;\r\n};\r\n\r\nconst VM = ({ v, u, h }) => {\r\n  const classes = useStyles({ u });\r\n  const { prefix, value, unit } = h?.getValues\r\n    ? h.getValues(v)\r\n    : getValues(v, u);\r\n  const toolTip = h?.getToolTip ? h.getToolTip(v) : getToolTip(v, u);\r\n  return (\r\n    <Tooltip title={toolTip} placement=\"left\">\r\n      <mark className={classes.mark}>\r\n        {!prefix ? null : `${prefix} `}\r\n        {value}\r\n        {!unit ? null : ` ${unit}`}\r\n      </mark>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nVM.defaultProps = {\r\n  u: undefined,\r\n  h: undefined,\r\n};\r\n\r\nexport default VM;\r\n","import React, { Fragment } from 'react';\r\n\r\nconst Condition = ({ name }) => {\r\n  return (\r\n    <Fragment>\r\n      <mark>\r\n        <a\r\n          href={`https://aonprd.com/Rules.aspx?Name=Conditions&Category=Combat#ctl00_MainContent_RulesResult:~:text=${name}:`}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          {name}\r\n        </a>\r\n      </mark>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Condition;\r\n","import React, { Fragment } from 'react';\r\nimport Condition from '../../../common/conditionDisplay.component';\r\nimport VM, {\r\n  dist,\r\n  fortSave,\r\n  time,\r\n} from '../../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const blindingColours = {\r\n  percentileMin: 91,\r\n  percentileMax: 95,\r\n  title: 'Blinding Colours',\r\n  createVariables: () => ({\r\n    length: makeConstantVariable(40, '40 ft. length'),\r\n    width: makeConstantVariable(30, '30ft. width'),\r\n    duration: makeVariable(6),\r\n    save: makeConstantVariable(15, 'DC 15 Fortitude Save', 'Fort Save'),\r\n  }),\r\n};\r\n\r\nconst BlindingColoursEvent = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Shimmering colours dance and play over a{' '}\r\n      <VM v={variables.length} u={dist} /> by{' '}\r\n      <VM v={variables.width} u={dist} /> area in front of the rod. Creatures\r\n      therein are <Condition name=\"Blinded\" /> for{' '}\r\n      <VM v={variables.duration} u={time} /> (\r\n      <VM v={variables.save} u={fortSave} /> negates)\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default BlindingColoursEvent;\r\n","import React, { Fragment } from 'react';\r\nimport Condition from '../../../common/conditionDisplay.component';\r\nimport VM, {\r\n  dist,\r\n  reflexSave,\r\n  time,\r\n} from '../../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const butterflyStream = {\r\n  percentileMin: 47,\r\n  percentileMax: 49,\r\n  title: 'Butterfly Stream',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(2, '2 rounds'),\r\n    radius: makeConstantVariable(25, '25ft. radius'),\r\n    butteflyCount: makeVariable(100, 2, 400),\r\n    save: makeConstantVariable(14, 'DC 14 Reflex Save', 'Reflex Save'),\r\n  }),\r\n};\r\n\r\nconst ButterflyStreamResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      A stream of <VM v={variables.butteflyCount} /> butterflies pours forth and\r\n      flutters around for <VM v={variables.duration} u={time} />, causing\r\n      everyone within a <VM v={variables.radius} u={dist} /> radius to become{' '}\r\n      <Condition name=\"Blinded\" /> while the butterfies block vision (\r\n      <VM v={variables.save} u={reflexSave} /> negates)\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ButterflyStreamResult;\r\n","import React, { Fragment } from 'react';\r\nimport { objectToArrayString } from '../../../common/utils';\r\nimport VM from '../../../common/variableMark.component';\r\nimport { makeVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const colourChange = {\r\n  percentileMin: 96,\r\n  percentileMax: 97,\r\n  title: 'Colour Change',\r\n  createVariables: () => ({\r\n    target: makeVariable(2),\r\n    colour: makeVariable(3),\r\n  }),\r\n};\r\n\r\nconst targets = {\r\n  1: 'wielder',\r\n  2: 'target',\r\n};\r\n\r\nconst handleTargets = {\r\n  getValues: variable => {\r\n    return {\r\n      value: targets[variable.result],\r\n    };\r\n  },\r\n  getToolTip: variable => {\r\n    return `1d2 [${variable.result}]: ${objectToArrayString(targets)}`;\r\n  },\r\n};\r\n\r\nconst colours = {\r\n  1: 'blue',\r\n  2: 'green',\r\n  3: 'purple',\r\n};\r\n\r\nconst handleColours = {\r\n  getValues: variable => {\r\n    return {\r\n      value: colours[variable.result],\r\n    };\r\n  },\r\n  getToolTip: variable => {\r\n    return `1d3 [${variable.result}]: ${objectToArrayString(colours)}`;\r\n  },\r\n};\r\n\r\nconst ColourChangeResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      The <VM v={variables.target} h={handleTargets} /> turns permanently{' '}\r\n      <VM v={variables.colour} h={handleColours} /> (no save).\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ColourChangeResult;\r\n","import React, { Fragment } from 'react';\r\nimport VM, { cl, time } from './variableMark.component';\r\n\r\nconst Spell = ({ name, linkName, casterLevel, save, saveType, duration }) => {\r\n  return (\r\n    <Fragment>\r\n      <a\r\n        href={`https://aonprd.com/SpellDisplay.aspx?ItemName=${encodeURIComponent(\r\n          linkName ?? name\r\n        )}`}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        {name}\r\n      </a>{' '}\r\n      spell (<VM v={casterLevel} u={cl} />\r\n      {duration || save ? '; ' : ''}\r\n      {duration && <VM v={duration} u={time} />}\r\n      {duration && save ? '; ' : ''}\r\n      {save && <VM v={save} u={saveType} />})\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nSpell.defaultProps = {\r\n  linkName: undefined,\r\n  save: undefined,\r\n  duration: undefined,\r\n};\r\n\r\nexport default Spell;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport VM, { direction, dist } from '../../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const darkness = {\r\n  percentileMin: 54,\r\n  percentileMax: 58,\r\n  title: 'Darkness',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(10, '10 rounds'),\r\n    diameter: makeConstantVariable(30, '30ft diameter'),\r\n    distance: makeConstantVariable(30, '30ft away'),\r\n    cardinalDirection: makeVariable(8),\r\n  }),\r\n};\r\n\r\nconst DarknessResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      A <VM v={variables.diameter} u={dist} /> diameter hemisphere of the{' '}\r\n      <Spell\r\n        name=\"Darkness\"\r\n        casterLevel={variables.casterLevel}\r\n        duration={variables.duration}\r\n      />{' '}\r\n      appears <VM v={variables.distance} u={dist} /> to the{' '}\r\n      <VM v={variables.cardinalDirection} u={direction} /> of the rod\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default DarknessResult;\r\n","import React, { Fragment } from 'react';\r\nimport AonLink from '../../../common/linkDisplay.component';\r\nimport VM, { time } from '../../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const delusion = {\r\n  percentileMin: 11,\r\n  percentileMax: 15,\r\n  title: 'Delusion',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(1, '1 round'),\r\n    secondDieRoll: makeVariable(100),\r\n  }),\r\n};\r\n\r\nconst DelusionResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Deludes the wielder for <VM v={variables.duration} u={time} /> into\r\n      believing the rod functions as if they had rolled a{' '}\r\n      <VM v={variables.secondDieRoll} /> on the{' '}\r\n      <AonLink\r\n        name=\"Rod of Wonder table\"\r\n        link=\"https://aonprd.com/MagicRodsDisplay.aspx?FinalName=Rod%20of%20Wonder\"\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default DelusionResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport VM, { time } from '../../../common/variableMark.component';\r\nimport { makeVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const detectThoughts = {\r\n  percentileMin: 21,\r\n  percentileMax: 25,\r\n  title: 'Detect Thoughts',\r\n  createVariables: () => ({\r\n    duration: makeVariable(4),\r\n  }),\r\n};\r\n\r\nconst DetectThoughtsResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Wielder learns the target&apos;s surface thoughts (as with{' '}\r\n      <Spell name=\"Detect Thoughts\" casterLevel={variables.casterLevel} />) for{' '}\r\n      <VM v={variables.duration} u={time} />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default DetectThoughtsResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport VM, { dist, fortSave } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const enlargePerson = {\r\n  percentileMin: 50,\r\n  percentileMax: 53,\r\n  title: 'Enlarge Person',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(10, '10 rounds'),\r\n    distance: makeConstantVariable(60, 'within 60ft'),\r\n    save: makeConstantVariable(13, 'DC 13 Fortitude Save', 'Fort Save'),\r\n  }),\r\n};\r\n\r\nconst EnlargePersonResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Target is affected by{' '}\r\n      <Spell\r\n        name=\"Enlarge Person\"\r\n        casterLevel={variables.casterLevel}\r\n        save={variables.save}\r\n        saveType={fortSave}\r\n        duration={variables.duration}\r\n      />{' '}\r\n      if within <VM v={variables.distance} u={dist} /> of the rod\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default EnlargePersonResult;\r\n","import { makeStyles, Tooltip } from '@material-ui/core';\r\nimport { lightBlue } from '@material-ui/core/colors';\r\nimport React, { Fragment } from 'react';\r\nimport VM, { dist, weight } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nconst useStyles = makeStyles({\r\n  mark: {\r\n    backgroundColor: lightBlue[50],\r\n  },\r\n});\r\n\r\nexport const etherealObject = {\r\n  percentileMin: 63,\r\n  percentileMax: 65,\r\n  title: 'Ethereal Object',\r\n  createVariables: () => ({\r\n    mass: makeConstantVariable(1000, '1,000 lbs of mass'),\r\n    volume: makeConstantVariable(30, '30 cubic feet'),\r\n  }),\r\n};\r\n\r\nconst EtherealObjectResult = ({ variables }) => {\r\n  const classes = useStyles();\r\n\r\n  const etherealTooltip =\r\n    'An ethereal object is invisible, insubstantial, and exists on the Ethereal plane. ' +\r\n    'Creatures and solid objects on the Material plane can move through ethereal objects. ' +\r\n    'Force effects and abjurations affect ethereal objects normally, their effects extend onto ' +\r\n    'the Ethereal plane from the Material plane but not vice versa. ' +\r\n    'Certain material creatures or objects have attacks or effects that work on the Ethereal plane';\r\n\r\n  return (\r\n    <Fragment>\r\n      Any non-living object of up to <VM v={variables.mass} u={weight} /> of\r\n      mass and up to <VM v={variables.volume} u={dist} /> cube in size turns{' '}\r\n      <Tooltip title={etherealTooltip} placement=\"left\">\r\n        <mark className={classes.mark}>Ethereal</mark>\r\n      </Tooltip>\r\n      .\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default EtherealObjectResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const faerieFire = {\r\n  percentileMin: 6,\r\n  percentileMax: 10,\r\n  title: 'Faerie Fire',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(10 * 10, 'Rod CL = 10; 10 minutes'),\r\n    save: makeConstantVariable(15, 'DC 15 Will Save', 'Will Save'),\r\n  }),\r\n};\r\n\r\nconst FaerieFireResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      <Spell\r\n        name=\"Faerie Fire\"\r\n        casterLevel={variables.casterLevel}\r\n        duration={variables.duration}\r\n      />{' '}\r\n      surrounds the target.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FaerieFireResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport VM, { dist, reflexSave } from '../../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const fireball = {\r\n  percentileMin: 70,\r\n  percentileMax: 79,\r\n  title: 'Fireball',\r\n  createVariables: () => ({\r\n    save: makeConstantVariable(15, 'DC 15 Reflex Save', 'Reflex Save'),\r\n    distance: makeConstantVariable(100, '100ft straight ahead'),\r\n    damage: makeVariable(6, 6),\r\n  }),\r\n};\r\n\r\nconst FireballResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      The wielder fires a{' '}\r\n      <Spell\r\n        name=\"Fireball\"\r\n        casterLevel={variables.casterLevel}\r\n        save={variables.save}\r\n        saveType={reflexSave}\r\n      />{' '}\r\n      straight ahead up to <VM v={variables.distance} u={dist} /> dealing{' '}\r\n      <VM v={variables.damage} /> points of damage.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FireballResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport VM, { dist, fortSave } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const fleshToStone = {\r\n  percentileMin: 98,\r\n  percentileMax: 100,\r\n  title: 'Flesh to Stone',\r\n  createVariables: () => ({\r\n    distance: makeConstantVariable(60, '60ft. away'),\r\n    save: makeConstantVariable(18, 'DC 18 Fortitude', 'Fort Save'),\r\n  }),\r\n};\r\n\r\nconst FleshToStoneResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      The target is affected by a{' '}\r\n      <Spell\r\n        name=\"Flesh to Stone\"\r\n        casterLevel={variables.casterLevel}\r\n        save={variables.save}\r\n        saveType={fortSave}\r\n      />{' '}\r\n      (or stone to flesh, if the target is already stone) as long as they are\r\n      within <VM v={variables.distance} u={dist} /> of the wielder.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FleshToStoneResult;\r\n","import React, { Fragment } from 'react';\r\nimport VM, { dist } from '../../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const gems = {\r\n  percentileMin: 88,\r\n  percentileMax: 90,\r\n  title: 'Gems',\r\n  createVariables: () => ({\r\n    gemCount: makeVariable(10, 3, 10),\r\n    distance: makeConstantVariable(30, '30ft long stream'),\r\n    damage: makeConstantVariable(1, '1 damage'),\r\n    numberOfHits: makeVariable(4, 5),\r\n  }),\r\n};\r\n\r\nconst GemsResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      <VM v={variables.gemCount} /> gemstones, <mark>valued at 1gp each</mark>,\r\n      shoot forth from the rod in a <VM v={variables.distance} u={dist} /> long\r\n      stream. <VM v={variables.numberOfHits} /> of these gemstones{' '}\r\n      <mark>hit creatures along the path</mark>. Divide these hits evenly among\r\n      the available targets to determine the damage each creature takes.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default GemsResult;\r\n","import React, { Fragment } from 'react';\r\nimport VM, { dist } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const grass = {\r\n  percentileMin: 59,\r\n  percentileMax: 62,\r\n  title: 'Grass',\r\n  createVariables: () => ({\r\n    area: makeConstantVariable(160, '160ft. square'),\r\n    existingGrowthAmount: makeConstantVariable(10, '10x normal size'),\r\n  }),\r\n};\r\n\r\nconst GrassResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Grass grows in a <VM v={variables.area} u={dist} /> square immediately in\r\n      front of the rod, or any existing grass there grows to{' '}\r\n      <VM v={variables.existingGrowthAmount} /> times its normal size.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default GrassResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport { fortSave } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const gustOfWind = {\r\n  percentileMin: 16,\r\n  percentileMax: 20,\r\n  title: 'Gust of Wind',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(1, '1 round'),\r\n    save: makeConstantVariable(14, 'DC 14 Fortitude Save', 'Fort Save'),\r\n  }),\r\n};\r\n\r\nconst GustOfWindResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      <Spell\r\n        name=\"Gust of Wind\"\r\n        casterLevel={variables.casterLevel}\r\n        save={variables.save}\r\n        saveType={fortSave}\r\n        duration={variables.duration}\r\n      />\r\n      , but at <mark>windstorm</mark> force\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default GustOfWindResult;\r\n","import React, { Fragment } from 'react';\r\nimport AonLink from '../../../common/linkDisplay.component';\r\nimport VM, { dist, time } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const heavyRain = {\r\n  percentileMin: 31,\r\n  percentileMax: 33,\r\n  title: 'Heavy Rain',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(1, '1 round'),\r\n    radius: makeConstantVariable(60, '60ft. Radius'),\r\n  }),\r\n};\r\n\r\nconst HeavyRainResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      <AonLink\r\n        link=\"https://aonprd.com/Rules.aspx?Name=Rain,%20Snow,%20Sleet,%20and%20Hail&Category=Weather#ctl00_MainContent_RulesResult:~:text=Rain:\"\r\n        name=\"Heavy Rain\"\r\n      />{' '}\r\n      falls for <VM v={variables.duration} u={time} /> in a{' '}\r\n      <VM v={variables.radius} u={dist} /> radius centered on the rod wielder\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default HeavyRainResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const invisibility = {\r\n  percentileMin: 80,\r\n  percentileMax: 84,\r\n  title: 'Invisibility',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(10 * 10, '10 minutes'),\r\n  }),\r\n};\r\n\r\nconst InvisibilityResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      The wielder turns invisible as per the{' '}\r\n      <Spell\r\n        name=\"Invisibility\"\r\n        casterLevel={variables.casterLevel}\r\n        duration={variables.duration}\r\n      />\r\n      .\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default InvisibilityResult;\r\n","import React, { Fragment } from 'react';\r\nimport VM, { dist, time } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const leaves = {\r\n  percentileMin: 85,\r\n  percentileMax: 87,\r\n  title: 'Leaves',\r\n  createVariables: () => ({\r\n    distance: makeConstantVariable(60, '60ft.'),\r\n    duration: makeConstantVariable(24 * 60 * 10, '1 day'),\r\n  }),\r\n};\r\n\r\nconst LeavesResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Leaves grows from the target&apos;s body, if the target is within{' '}\r\n      <VM v={variables.distance} u={dist} />. These last for{' '}\r\n      <VM v={variables.duration} u={time} />.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default LeavesResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport VM, { reflexSave } from '../../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const lightningBolt = {\r\n  percentileMin: 37,\r\n  percentileMax: 46,\r\n  title: 'Lightning Bolt',\r\n  createVariables: () => ({\r\n    length: makeConstantVariable(70, '70ft. long'),\r\n    damage: makeVariable(6, 6),\r\n    save: makeConstantVariable(15, 'DC 15 Reflex Save', 'Reflex Save'),\r\n  }),\r\n};\r\n\r\nconst LightningBoltEvent = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      <Spell\r\n        name=\"Lightning Bolt\"\r\n        casterLevel={variables.casterLevel}\r\n        save={variables.save}\r\n        saveType={reflexSave}\r\n      />{' '}\r\n      dealing <VM v={variables.damage} /> damage\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default LightningBoltEvent;\r\n","import React, { Fragment } from 'react';\r\nimport VM, { time } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const reduceWielder = {\r\n  percentileMin: 66,\r\n  percentileMax: 69,\r\n  title: 'Reduce Wielder',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(24 * 60 * 10, '1 day'),\r\n  }),\r\n};\r\n\r\nconst ReduceWielderResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Reduce the wielder two size categories <mark>(no save)</mark> for{' '}\r\n      <VM v={variables.duration} u={time} />.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ReduceWielderResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport { willSave } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const slow = {\r\n  percentileMin: 1,\r\n  percentileMax: 5,\r\n  title: 'Slow',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(10, 'Rod CL = 10; 10 minutes'),\r\n    save: makeConstantVariable(15, 'DC 15 Will Save', 'Will Save'),\r\n  }),\r\n};\r\n\r\nconst SlowResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Target affected by a{' '}\r\n      <Spell\r\n        name=\"Slow\"\r\n        casterLevel={variables.casterLevel}\r\n        save={variables.save}\r\n        saveType={willSave}\r\n        duration={variables.duration}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default SlowResult;\r\n","import React, { Fragment } from 'react';\r\nimport Spell from '../../../common/spellDisplay.component';\r\nimport VM, { dist, fortSave } from '../../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const stinkingCloud = {\r\n  percentileMin: 26,\r\n  percentileMax: 30,\r\n  title: 'Stinking Cloud',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(10, 'Rod CL = 10; 10 rounds'),\r\n    distance: makeConstantVariable(30, '30-foot range'),\r\n    save: makeConstantVariable(15, 'DC 15 Fortitude Save', 'Fort Save'),\r\n  }),\r\n};\r\n\r\nconst StinkingCloudResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      <Spell\r\n        name=\"Stinking Cloud\"\r\n        casterLevel={variables.casterLevel}\r\n        save={variables.save}\r\n        saveType={fortSave}\r\n        duration={variables.duration}\r\n      />{' '}\r\n      appears at a <VM v={variables.distance} u={dist} /> range.\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default StinkingCloudResult;\r\n","import React, { Fragment } from 'react';\r\nimport AonLink from '../../../common/linkDisplay.component';\r\nimport VM from '../../../common/variableMark.component';\r\nimport { makeVariable } from '../../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const summonAnimal = {\r\n  percentileMin: 34,\r\n  percentileMax: 36,\r\n  title: 'Summon Animal',\r\n  createVariables: () => ({\r\n    animalSummonPercentile: makeVariable(100),\r\n  }),\r\n};\r\n\r\nconst handleAnimalType = {\r\n  getValues: variable => {\r\n    if (variable.result <= 25) {\r\n      return {\r\n        value: (\r\n          <Fragment>\r\n            a{' '}\r\n            <AonLink\r\n              link=\"https://aonprd.com/MonsterDisplay.aspx?ItemName=Rhinoceros\"\r\n              name=\"rhino\"\r\n              noHighlight\r\n            />\r\n          </Fragment>\r\n        ),\r\n      };\r\n    }\r\n\r\n    if (variable.result <= 50) {\r\n      return {\r\n        value: (\r\n          <Fragment>\r\n            an{' '}\r\n            <AonLink\r\n              link=\"https://aonprd.com/MonsterDisplay.aspx?ItemName=Elephant\"\r\n              name=\"elephant\"\r\n              noHighlight\r\n            />\r\n          </Fragment>\r\n        ),\r\n      };\r\n    }\r\n\r\n    return {\r\n      value: (\r\n        <Fragment>\r\n          a{' '}\r\n          <AonLink\r\n            link=\"https://aonprd.com/MonsterDisplay.aspx?ItemName=Rat\"\r\n            name=\"mouse\"\r\n            noHighlight\r\n          />\r\n        </Fragment>\r\n      ),\r\n    };\r\n  },\r\n  getToolTip: variable => {\r\n    return `1d% [${variable.result}]: 01-25=rhino; 26-50=elephant; 51-100=mouse`;\r\n  },\r\n};\r\n\r\nconst SummonAnimalResult = ({ variables }) => {\r\n  return (\r\n    <Fragment>\r\n      Summons <VM v={variables.animalSummonPercentile} h={handleAnimalType} />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default SummonAnimalResult;\r\n","import React from 'react';\r\nimport BlindingColoursEvent, {\r\n  blindingColours,\r\n} from './blindingColoursResult.component';\r\nimport ButterflyStreamResult, {\r\n  butterflyStream,\r\n} from './butterflyStreamResult.component';\r\nimport ColourChangeResult, {\r\n  colourChange,\r\n} from './colourChangeResult.component';\r\nimport DarknessResult, { darkness } from './darknessResult.component';\r\nimport DelusionResult, { delusion } from './delusionResult.component';\r\nimport DetectThoughtsResult, {\r\n  detectThoughts,\r\n} from './detectThoughtsResult.component';\r\nimport EnlargePersonResult, {\r\n  enlargePerson,\r\n} from './enlargePersonResult.component';\r\nimport EtherealObjectResult, {\r\n  etherealObject,\r\n} from './etherealObjectResult.component';\r\nimport FaerieFireResult, { faerieFire } from './faerieFireResult.component';\r\nimport FireballResult, { fireball } from './fireballResult.component';\r\nimport FleshToStoneResult, {\r\n  fleshToStone,\r\n} from './fleshToStoneResult.component';\r\nimport GemsResult, { gems } from './gemsResult.component';\r\nimport GrassResult, { grass } from './grassResult.component';\r\nimport GustOfWindResult, { gustOfWind } from './gustOfWindResult.component';\r\nimport HeavyRainResult, { heavyRain } from './heavyRainResult.component';\r\nimport InvisibilityResult, {\r\n  invisibility,\r\n} from './invisibilityResult.component';\r\nimport LeavesResult, { leaves } from './leavesResult.component';\r\nimport LightningBoltEvent, {\r\n  lightningBolt,\r\n} from './lightningBoltResult.component';\r\nimport ReduceWielderResult, {\r\n  reduceWielder,\r\n} from './reduceWielderResult.component';\r\nimport SlowResult, { slow } from './slowResult.component';\r\nimport StinkingCloudResult, { stinkingCloud } from './stinkingCloud.component';\r\nimport SummonAnimalResult, {\r\n  summonAnimal,\r\n} from './summonAnimalResult.component';\r\n\r\nexport const getRodOfWonderComponent = (rodResult, variables) => {\r\n  if (rodResult.title === slow.title) {\r\n    return <SlowResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === faerieFire.title) {\r\n    return <FaerieFireResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === delusion.title) {\r\n    return <DelusionResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === gustOfWind.title) {\r\n    return <GustOfWindResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === detectThoughts.title) {\r\n    return <DetectThoughtsResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === stinkingCloud.title) {\r\n    return <StinkingCloudResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === heavyRain.title) {\r\n    return <HeavyRainResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === summonAnimal.title) {\r\n    return <SummonAnimalResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === lightningBolt.title) {\r\n    return <LightningBoltEvent variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === butterflyStream.title) {\r\n    return <ButterflyStreamResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === enlargePerson.title) {\r\n    return <EnlargePersonResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === darkness.title) {\r\n    return <DarknessResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === grass.title) {\r\n    return <GrassResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === etherealObject.title) {\r\n    return <EtherealObjectResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === reduceWielder.title) {\r\n    return <ReduceWielderResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === fireball.title) {\r\n    return <FireballResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === invisibility.title) {\r\n    return <InvisibilityResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === leaves.title) {\r\n    return <LeavesResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === gems.title) {\r\n    return <GemsResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === blindingColours.title) {\r\n    return <BlindingColoursEvent variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === colourChange.title) {\r\n    return <ColourChangeResult variables={variables} />;\r\n  }\r\n\r\n  if (rodResult.title === fleshToStone.title) {\r\n    return <FleshToStoneResult variables={variables} />;\r\n  }\r\n\r\n  return <div>UNKNOWN ROD OF WONDER RESULT {rodResult.title}</div>;\r\n};\r\n\r\nexport const rodOfWonderResults = [\r\n  slow,\r\n  faerieFire,\r\n  delusion,\r\n  gustOfWind,\r\n  detectThoughts,\r\n  stinkingCloud,\r\n  heavyRain,\r\n  summonAnimal,\r\n  lightningBolt,\r\n  butterflyStream,\r\n  enlargePerson,\r\n  darkness,\r\n  grass,\r\n  etherealObject,\r\n  reduceWielder,\r\n  fireball,\r\n  invisibility,\r\n  leaves,\r\n  gems,\r\n  blindingColours,\r\n  colourChange,\r\n  fleshToStone,\r\n];\r\n\r\nexport const getRodResult = percentileRoll => {\r\n  const results = rodOfWonderResults.filter(\r\n    e => percentileRoll >= e.percentileMin && percentileRoll <= e.percentileMax\r\n  );\r\n\r\n  if (results.length === 0) {\r\n    return rodOfWonderResults[0];\r\n  }\r\n\r\n  return results[0];\r\n};\r\n\r\nexport const getRodResultByTitle = title => {\r\n  const results = rodOfWonderResults.filter(e => e.title === title);\r\n\r\n  if (results.length === 0) {\r\n    return rodOfWonderResults[0];\r\n  }\r\n\r\n  return results[0];\r\n};\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport AonLink from '../../common/linkDisplay.component';\r\nimport VM from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\nimport {\r\n  getRodOfWonderComponent,\r\n  getRodResult,\r\n  getRodResultByTitle,\r\n} from './rodOfWonderResults/rodOfWonderResults';\r\n\r\nexport const wonderousMagic = {\r\n  table: 1,\r\n  percentileMin: 79,\r\n  percentileMax: 88,\r\n  title: 'Wonderous Magic',\r\n  createVariables: (_, rodOfWonderEventAlwaysSelected) => {\r\n    const match = rodOfWonderEventAlwaysSelected\r\n      ? getRodResultByTitle(rodOfWonderEventAlwaysSelected)\r\n      : undefined;\r\n    const rodOfWonderPercentile = makeVariable(100);\r\n\r\n    if (match) {\r\n      rodOfWonderPercentile.result = match.percentileMin;\r\n    }\r\n\r\n    const rodOfWonderVariables = getRodResult(\r\n      rodOfWonderPercentile.result\r\n    ).createVariables();\r\n\r\n    return {\r\n      duration: makeConstantVariable(0), // May get over-written by the specific rod result\r\n      casterLevel: makeConstantVariable(10, 'Rod CL = 10'),\r\n      rodOfWonderPercentile,\r\n      ...rodOfWonderVariables,\r\n    };\r\n  },\r\n};\r\n\r\nconst WonderousMagicEvent = ({ event }) => {\r\n  const { variables } = event;\r\n  const { rodOfWonderPercentile } = variables;\r\n\r\n  const rodResult = getRodResult(rodOfWonderPercentile.result);\r\n  const rodComponent = getRodOfWonderComponent(rodResult, variables);\r\n\r\n  return (\r\n    <Typography>\r\n      Choose two random creatures in the area, then randomly pick one to be the\r\n      &quot;wielder&quot; and one to be the &quot;target&quot;. A roll of{' '}\r\n      <VM v={rodOfWonderPercentile} /> on the{' '}\r\n      <AonLink\r\n        name=\"Rod of Wonder table\"\r\n        link=\"https://aonprd.com/MagicRodsDisplay.aspx?FinalName=Rod%20of%20Wonder\"\r\n      />{' '}\r\n      has determined the strange effect that occurs between these two creatures:{' '}\r\n      <br /> <br />\r\n      {rodComponent}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default WonderousMagicEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Condition from '../../common/conditionDisplay.component';\r\nimport VM, { dist, time, willSave } from '../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const auroraBorealis = {\r\n  table: 1,\r\n  percentileMin: 55,\r\n  percentileMax: 62,\r\n  title: 'Aurora Borealis',\r\n  createVariables: cr => ({\r\n    radius: makeConstantVariable(cr * 10, 'CR x 10ft.'),\r\n    save: makeConstantVariable(cr + 10, 'Will Save DC = CR + 10', 'Will Save'),\r\n    duration: makeConstantVariable(cr, 'CR rounds'),\r\n  }),\r\n};\r\n\r\nconst AuroraBorealisEvent = ({ event }) => {\r\n  const { radius, duration, save } = event.variables;\r\n  return (\r\n    <Typography>\r\n      Strange, shifting curtains of colour, akin to an aurora borealis, manifest\r\n      in the sky but are visible only to those in a <VM v={radius} u={dist} />{' '}\r\n      radius. Every creature in this area must make a{' '}\r\n      <VM v={save} u={willSave} /> or become <Condition name=\"Dazed\" /> by the\r\n      shifting colours <mark>for 1 round</mark>. The colours persist for{' '}\r\n      <VM v={duration} u={time} />. Creatures must make a{' '}\r\n      <mark>new save each round</mark> to avoid becoming dazed. This is a\r\n      mind-affecting effect.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default AuroraBorealisEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Spell from '../../common/spellDisplay.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const blackTentacles = {\r\n  table: 2,\r\n  percentileMin: 13,\r\n  percentileMax: 25,\r\n  title: 'Black Tentacles',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(cr, 'CL = CR'),\r\n    casterLevel: makeConstantVariable(cr, 'CL = CR'),\r\n  }),\r\n};\r\n\r\nconst BlackTentaclesEvent = ({ event }) => {\r\n  const { duration, casterLevel } = event.variables;\r\n  return (\r\n    <Typography>\r\n      The ground lurches to life and attacks creatures in the area as though\r\n      with the{' '}\r\n      <Spell\r\n        name=\"Black Tentacles\"\r\n        casterLevel={casterLevel}\r\n        duration={duration}\r\n      />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default BlackTentaclesEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, { dist, time } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const boomingCannons = {\r\n  table: 2,\r\n  percentileMin: 26,\r\n  percentileMax: 38,\r\n  title: 'Booming Cannons',\r\n  createVariables: cr => ({\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    duration: makeVariable(6),\r\n    misfire: makeVariable(3),\r\n  }),\r\n};\r\n\r\nconst BoomingCannonsEvent = ({ event }) => {\r\n  const { radius, duration, misfire } = event.variables;\r\n  return (\r\n    <Typography>\r\n      The sound of booming cannons fills the air, and all <mark>firearms</mark>{' '}\r\n      in a <VM v={radius} u={dist} /> radius spread{' '}\r\n      <mark>increase their misfire chance</mark> by <VM v={misfire} /> for{' '}\r\n      <VM v={duration} u={time} />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default BoomingCannonsEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { objectToArrayString } from '../../common/utils';\r\nimport VM, { time } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const catchyMusic = {\r\n  table: 1,\r\n  percentileMin: 11,\r\n  percentileMax: 14,\r\n  title: 'Catchy Music',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(cr * 10, 'CR mins'),\r\n    chantType: makeVariable(4), // 1d4; 1=Ulfen battle chants, 2=Chelish opera arias, 3=Desnan Prayers, 4=Vudrani monastic chants\r\n  }),\r\n};\r\n\r\nconst battleChants = {\r\n  1: 'Ulfen battle chants',\r\n  2: 'Chelish opera arias',\r\n  3: 'Desnan prayers',\r\n  4: 'Vudrani monastic chants',\r\n};\r\n\r\nconst handleChant = {\r\n  getValues: variable => {\r\n    return {\r\n      value: battleChants[variable.result],\r\n      unit: undefined,\r\n    };\r\n  },\r\n  getToolTip: variable => {\r\n    return `1d4 [${variable.result}]: ${objectToArrayString(battleChants)}`;\r\n  },\r\n};\r\n\r\nconst CatchyMusicEvent = ({ event }) => {\r\n  const { duration, chantType } = event.variables;\r\n  return (\r\n    <Typography>\r\n      Strange music fills the air for <VM v={duration} u={time} />. The music\r\n      reminds you of <VM v={chantType} h={handleChant} />. Those who hear the\r\n      music are instilled with a strong urge to sing or dance along. A creature\r\n      who does so gains a{' '}\r\n      <mark>+2 morale bonus on attack rolls and saving throws</mark> for the\r\n      duration of the music. heads in the direction of the Pit of Gormuz.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default CatchyMusicEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const centipedes = {\r\n  table: 1,\r\n  percentileMin: 7,\r\n  percentileMax: 10,\r\n  title: 'Centipedes',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(0),\r\n    centipedeCount: makeVariable(6), // new - centipede count, need to figure out how this works to make the CR total work\r\n  }),\r\n};\r\n\r\nconst handleCentipedes = {\r\n  getValues: variable => {\r\n    return {\r\n      value: variable.result,\r\n      unit: 'strangely coloured centipedes',\r\n    };\r\n  },\r\n};\r\n\r\nconst CentipedesEvent = ({ event }) => {\r\n  const { centipedeCount } = event.variables;\r\n  return (\r\n    <Typography>\r\n      <VM v={centipedeCount} h={handleCentipedes} /> appear in the area. These\r\n      centipedes <mark>ignore non-spellcasters</mark> and attack only creatures\r\n      capable of casting spells or using spell-like abilities. This encounter\r\n      should be a mix of centipedes that equals the CR of the primal magic\r\n      event. The corpses of any slaind centipedes pivot their heads in the\r\n      direction of the Pit of Gormuz.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default CentipedesEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Condition from '../../common/conditionDisplay.component';\r\nimport VM, { dist, time, willSave } from '../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const colourDrain = {\r\n  table: 1,\r\n  percentileMin: 1,\r\n  percentileMax: 6,\r\n  title: 'Colour Drain',\r\n  createVariables: cr => ({\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    duration: makeConstantVariable(cr * 10, 'CR mins'),\r\n    save: makeConstantVariable(15, 'DC 15 Will Save', 'Will Save'),\r\n  }),\r\n};\r\n\r\nconst ColourDrainEvent = ({ event }) => {\r\n  const { radius, duration, save } = event.variables;\r\n  return (\r\n    <Typography>\r\n      Creatures and objects within a <VM v={radius} u={dist} /> radius are\r\n      drained of colour for <VM v={duration} u={time} />. A gnome in this area\r\n      must succeed at a <VM v={save} u={willSave} /> to avoid being{' '}\r\n      <Condition name=\"Shaken\" /> by this effect for the duration of the loss\r\n      colour. This is a mind-affecting fear effect.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ColourDrainEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport AonLink from '../../common/linkDisplay.component';\r\nimport { objectToArrayString } from '../../common/utils';\r\nimport VM, { direction, dist, time } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const elementalGrudge = {\r\n  table: 2,\r\n  percentileMin: 91,\r\n  percentileMax: 96,\r\n  title: 'Elemental Grudge',\r\n  createVariables: () => ({\r\n    distance: makeConstantVariable(10, 'within 10ft.'),\r\n    duration: makeConstantVariable(10, '1 minute'),\r\n    elementalType: makeVariable(8),\r\n    cardinalDirection: makeVariable(8),\r\n  }),\r\n};\r\n\r\nconst elementalTypes = {\r\n  1: 'Air',\r\n  2: 'Earth',\r\n  3: 'Fire',\r\n  4: 'Ice',\r\n  5: 'Lightning',\r\n  6: 'Magma',\r\n  7: 'Mud',\r\n  8: 'Water',\r\n};\r\n\r\nconst crSizes = {\r\n  1: 'Small',\r\n  3: 'Medium',\r\n  5: 'Large',\r\n  7: 'Huge',\r\n  9: 'Greater',\r\n  11: 'Elder',\r\n};\r\n\r\nconst getElementalLink = (result, cr) => {\r\n  const availableSizes = Object.entries(crSizes).filter(([key]) => key <= cr);\r\n  const size = availableSizes[availableSizes.length - 1][1]; // They are in order, so we can grab the last available\r\n  const type = elementalTypes[result];\r\n  const prefix = size === crSizes[11] ? 'an' : 'a';\r\n  const link = `https://aonprd.com/MonsterDisplay.aspx?ItemName=${size}%20${type}%20Elemental`;\r\n  return (\r\n    <AonLink\r\n      link={link}\r\n      name={`${prefix} ${size} ${type} Elemental`}\r\n      noHighlight\r\n    />\r\n  );\r\n};\r\n\r\nconst handleElementalType = cr => ({\r\n  getValues: variable => {\r\n    return {\r\n      value: getElementalLink(variable.result, cr),\r\n    };\r\n  },\r\n  getToolTip: variable => {\r\n    return `1d8 [${variable.result}]: ${objectToArrayString(elementalTypes)}`;\r\n  },\r\n});\r\n\r\nconst ElementalGrudgeEvent = ({ event }) => {\r\n  const cr = event.cr;\r\n  const {\r\n    duration,\r\n    distance,\r\n    elementalType,\r\n    cardinalDirection,\r\n  } = event.variables;\r\n  return (\r\n    <Typography>\r\n      An extraplanar rift opens up to the{' '}\r\n      <VM v={cardinalDirection} u={direction} />, <VM v={distance} u={dist} />{' '}\r\n      from the source of this event;{' '}\r\n      <VM v={elementalType} h={handleElementalType(cr.result)} /> comes through\r\n      the rift and <mark>attacks the nearest creature</mark> for{' '}\r\n      <VM v={duration} u={time} /> before returning to its plane of origin.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ElementalGrudgeEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const elementalUprising = {\r\n  table: 1,\r\n  percentileMin: 49,\r\n  percentileMax: 54,\r\n  title: 'Elemental Uprising',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(0),\r\n    elementalCount: makeVariable(6), // new - elemental count, need to figure out how this works to make the CR total work\r\n  }),\r\n};\r\n\r\nconst handleElementals = {\r\n  getValues: variable => {\r\n    return {\r\n      value: variable.result,\r\n      unit: 'terrain-appropriate elementals',\r\n    };\r\n  },\r\n};\r\n\r\nconst ElementalUprisingEvent = ({ event }) => {\r\n  const { elementalCount } = event.variables;\r\n  return (\r\n    <Typography>\r\n      The enviroment suddenly springs to life and attacks all{' '}\r\n      <mark>non-elemental creatures</mark> in the immediate area. This is an\r\n      encounter with <VM v={elementalCount} h={handleElementals} /> drawn from\r\n      the surroundings with mix of elementals that equals the CR of the primal\r\n      magic event.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ElementalUprisingEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const enantiomaticSelf = {\r\n  table: 1,\r\n  percentileMin: 19,\r\n  percentileMax: 22,\r\n  title: 'Enantiomatic Self',\r\n  createVariables: () => ({\r\n    duration: makeConstantVariable(0),\r\n  }),\r\n};\r\n\r\nconst EnantiomaticSelfEvent = () => {\r\n  return (\r\n    <Typography>\r\n      One creature&apos;s body and all its posessions reverse into a mirror\r\n      image of themselves. The binding of any book in its posession is reversed,\r\n      though the text within remains normal and legible. This effect is unusal\r\n      but has <mark>no actual game effect</mark>. Reversing this effect is\r\n      possible via break enchantment, limited wish, miracle, polymorph and\r\n      object, or wish.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default EnantiomaticSelfEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, { energy, time } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const energeticTouch = {\r\n  table: 2,\r\n  percentileMin: 52,\r\n  percentileMax: 64,\r\n  title: 'Energetic Touch',\r\n  createVariables: cr => ({\r\n    energyType: makeVariable(4),\r\n    duration: makeConstantVariable(3, 'dissapates in 3 rounds'),\r\n    damage: makeVariable(6, cr, 0, 'CR x 1d6'),\r\n  }),\r\n};\r\n\r\nconst EnergeticTouchEvent = ({ event }) => {\r\n  const { energyType, duration, damage } = event.variables;\r\n  return (\r\n    <Typography>\r\n      The character that triggered this event glows fluorescent with{' '}\r\n      <VM v={energyType} u={energy} />, and deals <VM v={damage} /> points of{' '}\r\n      <VM v={energyType} u={energy} /> damage to the{' '}\r\n      <mark>next creature it touches</mark> (touch attack required). This energy\r\n      disappates in <VM v={duration} u={time} /> if not released.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default EnergeticTouchEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, {\r\n  dist,\r\n  energy,\r\n  reflexSave,\r\n  time,\r\n} from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const energyStorm = {\r\n  table: 1,\r\n  percentileMin: 69,\r\n  percentileMax: 74,\r\n  title: 'Energy Storm',\r\n  createVariables: cr => ({\r\n    energyType: makeVariable(4),\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    damage: makeConstantVariable(cr * 2, 'CR x 2 damage'),\r\n    duration: makeConstantVariable(cr, 'CR rounds'),\r\n    save: makeConstantVariable(\r\n      cr + 10,\r\n      'Reflex Save DC = CR + 10',\r\n      'Reflex Save'\r\n    ),\r\n  }),\r\n};\r\n\r\nconst EnergyStormEvent = ({ event }) => {\r\n  const { energyType, radius, damage, duration, save } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A storm of <VM v={energyType} u={energy} /> sweeps through a{' '}\r\n      <VM v={radius} u={dist} /> radius spread. Each round, the storm inflicts{' '}\r\n      <VM v={damage} /> points of damage; a <VM v={save} u={reflexSave} />{' '}\r\n      halves the damage done. The storm persists for{' '}\r\n      <VM v={duration} u={time} />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default EnergyStormEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Spell from '../../common/spellDisplay.component';\r\nimport VM, { dist, reflexSave } from '../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const extradimensionalPit = {\r\n  table: 1,\r\n  percentileMin: 23,\r\n  percentileMax: 26,\r\n  title: 'Extradimensional Pit',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(cr + 1, '1 + 1 round/level'),\r\n    depth: makeConstantVariable(cr * 10, 'CR x 10ft.'),\r\n    casterLevel: makeConstantVariable(cr, 'CL = CR'),\r\n    save: makeConstantVariable(\r\n      cr + 10,\r\n      'Reflex Save DC = CR + 10',\r\n      'Reflex Save'\r\n    ),\r\n  }),\r\n};\r\n\r\nconst ExtradimensionalPitEvent = ({ event }) => {\r\n  const { depth, duration, casterLevel, save } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A circular pit opens under the feet of a random target. The pit creates an\r\n      extradimensional space in the ground, not an actual pit. The pit is{' '}\r\n      <VM v={depth} u={dist} />, but otherwise functions as the{' '}\r\n      <Spell\r\n        name=\"Create Pit\"\r\n        casterLevel={casterLevel}\r\n        save={save}\r\n        saveType={reflexSave}\r\n        duration={duration}\r\n      />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ExtradimensionalPitEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, { dist, time } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const forgeOfCriticals = {\r\n  table: 2,\r\n  percentileMin: 1,\r\n  percentileMax: 12,\r\n  title: 'Forge of Criticals',\r\n  createVariables: cr => ({\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    duration: makeVariable(6),\r\n  }),\r\n};\r\n\r\nconst ForgeOfCriticalsEvent = ({ event }) => {\r\n  const { radius, duration } = event.variables;\r\n  return (\r\n    <Typography>\r\n      The sound of hammers ringing against anvils fills a{' '}\r\n      <VM v={radius} u={dist} /> radius spread area for{' '}\r\n      <VM v={duration} u={time} />. Creatures in this area{' '}\r\n      <mark>automatically confirm critical hits</mark>.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ForgeOfCriticalsEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Spell from '../../common/spellDisplay.component';\r\nimport VM, { willSave } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const harm = {\r\n  table: 1,\r\n  percentileMin: 33,\r\n  percentileMax: 38,\r\n  title: 'Harm',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(0),\r\n    casterLevel: makeConstantVariable(cr, 'CL = CR'),\r\n    creaturesAffected: makeVariable(cr, 1, 0, '# Creatures <= CR in total'),\r\n    save: makeConstantVariable(cr + 10, 'Will Save DC = CR + 10', 'Will Save'),\r\n  }),\r\n};\r\n\r\nconst HarmEvent = ({ event }) => {\r\n  const { casterLevel, creaturesAffected, save } = event.variables;\r\n  return (\r\n    <Typography>\r\n      Negative energy affects <VM v={creaturesAffected} /> nearby creatures.\r\n      These creatures are affected by a{' '}\r\n      <Spell\r\n        name=\"Harm\"\r\n        casterLevel={casterLevel}\r\n        save={save}\r\n        saveType={willSave}\r\n      />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default HarmEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Spell from '../../common/spellDisplay.component';\r\nimport VM, { willSave } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const heal = {\r\n  table: 1,\r\n  percentileMin: 33,\r\n  percentileMax: 38,\r\n  title: 'Heal',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(0),\r\n    casterLevel: makeConstantVariable(cr, 'CL = CR'),\r\n    creaturesAffected: makeVariable(cr, 1, 0, '# Creatures <= CR in total'),\r\n    save: makeConstantVariable(cr + 10, 'Will Save DC = CR + 10', 'Will Save'),\r\n  }),\r\n};\r\n\r\nconst HealEvent = ({ event }) => {\r\n  const { casterLevel, creaturesAffected, save } = event.variables;\r\n  return (\r\n    <Typography>\r\n      Positive energy affects <VM v={creaturesAffected} /> nearby creatures.\r\n      These creatures are affected by a{' '}\r\n      <Spell\r\n        name=\"Heal\"\r\n        casterLevel={casterLevel}\r\n        save={save}\r\n        saveType={willSave}\r\n      />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default HealEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Condition from '../../common/conditionDisplay.component';\r\nimport VM, { dist, time, willSave } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const icyDread = {\r\n  table: 2,\r\n  percentileMin: 78,\r\n  percentileMax: 90,\r\n  title: 'Icy Dread',\r\n  createVariables: () => ({\r\n    radius: makeConstantVariable(30, '30ft. radius spread'),\r\n    save: makeConstantVariable(20, 'DC 20 Will Save', 'Will Save'),\r\n    duration: makeVariable(6),\r\n  }),\r\n};\r\n\r\nconst IcyDreadEvent = ({ event }) => {\r\n  const { save, duration, radius } = event.variables;\r\n  return (\r\n    <Typography>\r\n      Icy dread cripples all creatures within a <VM v={radius} u={dist} />{' '}\r\n      radius spread. Affected creatures must succeed at a{' '}\r\n      <VM v={save} u={willSave} /> or become <Condition name=\"Staggered\" /> for{' '}\r\n      <VM v={duration} u={time} />. This is a mind-affecting fear effect.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default IcyDreadEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Condition from '../../common/conditionDisplay.component';\r\nimport Spell from '../../common/spellDisplay.component';\r\nimport VM, { time, willSave } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const magicJar = {\r\n  table: 1,\r\n  percentileMin: 95,\r\n  percentileMax: 98,\r\n  title: 'Magic Jar',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(0),\r\n    save: makeConstantVariable(cr + 10, 'Will Save DC = CR + 10', 'Will Save'),\r\n    stunDuration: makeVariable(4), // 1d4 rounds stun duration\r\n    bodySwapDuration: makeConstantVariable(cr, 'CR rounds'),\r\n    casterLevel: makeConstantVariable(cr, 'CL = CR'),\r\n  }),\r\n};\r\n\r\nconst MagicJarEvent = ({ event }) => {\r\n  const { save, stunDuration, bodySwapDuration, casterLevel } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A <Spell name=\"Magic Jar\" casterLevel={casterLevel} /> like effect affects\r\n      two creatures. A <VM v={save} u={willSave} /> negates the effect. If one\r\n      creature fails this save but the other succeeds, the creature that fails\r\n      the save is merely <Condition name=\"Stunned\" /> for{' '}\r\n      <VM v={stunDuration} u={time} />. If both creatures fail the save, their{' '}\r\n      <mark>minds are switched</mark> into each other&apos;s bodies for{' '}\r\n      <VM v={bodySwapDuration} u={time} />.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default MagicJarEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Condition from '../../common/conditionDisplay.component';\r\nimport VM, {\r\n  dist,\r\n  strengthCheck,\r\n  time,\r\n} from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const magneticField = {\r\n  table: 2,\r\n  percentileMin: 39,\r\n  percentileMax: 51,\r\n  title: 'Magnetic Field',\r\n  createVariables: cr => ({\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    cmb: makeConstantVariable(cr + 10, 'CMB = CR + 10'),\r\n    duration: makeVariable(6),\r\n    strengthDc: makeConstantVariable(cr + 5, 'CR + 5'),\r\n  }),\r\n};\r\n\r\nconst MagneticFieldEvent = ({ event }) => {\r\n  const { radius, duration, cmb, strengthDc } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A powerful magnetic field opens up in a <VM v={radius} u={dist} /> radius\r\n      spread; this acts as a <mark>trip attempt</mark> against any creatures in\r\n      the area <mark>wearing metal armor</mark> (CMB = +<VM v={cmb} />\r\n      ). As a standard action, a creature knocked <Condition name=\"Prone\" /> by\r\n      this effect may attempt a <VM v={strengthDc} u={strengthCheck} /> to\r\n      stand. This effect lasts for <VM v={duration} u={time} />.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default MagneticFieldEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Condition from '../../common/conditionDisplay.component';\r\nimport VM, { willSave } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const massDelusion = {\r\n  table: 1,\r\n  percentileMin: 63,\r\n  percentileMax: 68,\r\n  title: 'Mass Delusion',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(0),\r\n    creaturesAffected: makeVariable(cr, 1, 0, '# Creatures <= CR in total'),\r\n    save: makeConstantVariable(cr + 10, 'Will Save DC = CR + 10', 'Will Save'),\r\n  }),\r\n};\r\n\r\nconst MassDelusionEvent = ({ event }) => {\r\n  const { variables } = event;\r\n  const { creaturesAffected, save } = variables;\r\n  return (\r\n    <Typography>\r\n      <VM v={creaturesAffected} /> creatures become{' '}\r\n      <Condition name=\"Confused\" /> unless they succeed at a{' '}\r\n      <VM v={save} u={willSave} />. For each affected creature, this effect{' '}\r\n      <mark>persists until</mark> that creature&apos;s confusion effect results\r\n      in <mark>&quot;act normally&quot;</mark>, at which point the effect ends\r\n      for that creature. This is a mind-affecting effect. mind-affecting effect.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default MassDelusionEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, { dist, time } from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const orbOfGrease = {\r\n  table: 2,\r\n  percentileMin: 97,\r\n  percentileMax: 100,\r\n  title: 'Orb of Grease',\r\n  createVariables: cr => ({\r\n    duration: makeVariable(4),\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n  }),\r\n};\r\n\r\nconst OrbOfGreaseEvent = ({ event }) => {\r\n  const { radius, duration } = event.variables;\r\n  return (\r\n    <Typography>\r\n      An orb of grease explodes and covers all creatures in a{' '}\r\n      <VM v={radius} u={dist} /> radius burst,{' '}\r\n      <mark>increasing all affected creatures&apos; CMD by 10</mark> for{' '}\r\n      <VM v={duration} u={time} />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default OrbOfGreaseEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, { dist, time } from '../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const rainOfSmallObjects = {\r\n  table: 1,\r\n  percentileMin: 27,\r\n  percentileMax: 32,\r\n  title: 'Rain of Small Objects',\r\n  createVariables: cr => ({\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    duration: makeConstantVariable(cr, 'CR rounds'),\r\n  }),\r\n};\r\n\r\nconst RainOfSmallObjectsEvent = ({ event }) => {\r\n  const { radius, duration } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A rain of small objects (anything from flowers to rotten fruit) pelts an\r\n      area with a <VM v={radius} u={dist} /> radius for{' '}\r\n      <VM v={duration} u={time} />. This strange hail is not harmful, but this\r\n      time all creatures in the area{' '}\r\n      <mark>gain concealment (20% miss chance)</mark> and must make{' '}\r\n      <mark>concentration checks (DC 15 + SL)</mark> to cast spells.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default RainOfSmallObjectsEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Spell from '../../common/spellDisplay.component';\r\nimport VM, {\r\n  dist,\r\n  willSave,\r\n  direction,\r\n} from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const teleportationStorm = {\r\n  table: 1,\r\n  percentileMin: 89,\r\n  percentileMax: 94,\r\n  title: 'Teleportation Storm',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(0),\r\n    save: makeConstantVariable(cr + 10, 'DC = CR + 10', 'Will Save'),\r\n    distance: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    casterLevel: makeConstantVariable(cr, 'CL = CR'),\r\n    cardinalDirection: makeVariable(8),\r\n  }),\r\n};\r\n\r\nconst TeleportationStormEvent = ({ event }) => {\r\n  const { distance, save, casterLevel, cardinalDirection } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A teleportation storm occurs. All creatures in the area must make a{' '}\r\n      <VM v={save} u={willSave} />. Those who fail are teleported, as if via\r\n      <Spell name=\"Dimension Door\" casterLevel={casterLevel} />, so that they\r\n      randomly{' '}\r\n      <mark>swap places with another creature that failed their save</mark>.\r\n      this places a creature in an area too small to accept its space, it\r\n      instead appears in the closest adjacent space that can contain it. If only\r\n      one creature is affected, it teleports <VM v={distance} u={dist} /> to the{' '}\r\n      <VM v={cardinalDirection} u={direction} />.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default TeleportationStormEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, { dist } from '../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const trippingTelekinesis = {\r\n  table: 1,\r\n  percentileMin: 75,\r\n  percentileMax: 78,\r\n  title: 'Tripping Telekinesis',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(0),\r\n    radius: makeConstantVariable(cr * 10, 'CR x 10ft.'),\r\n    cmb: makeConstantVariable(cr + 10, 'CMB = CR + 10'),\r\n  }),\r\n};\r\n\r\nconst TrippingTelekinesisEvent = ({ event }) => {\r\n  const { radius, cmb } = event.variables;\r\n  return (\r\n    <Typography>\r\n      Strange telekinetic forces rip through the area, attempting to trip all\r\n      creatures in a <VM v={radius} u={dist} /> radius. The event makes a{' '}\r\n      <mark>trip combat maneuver</mark> check against all available targets,\r\n      using a CMB of +<VM v={cmb} />. Any creature tripped by the event has its\r\n      equipment reorganized and tangled by the mischievous telekinesis. Until a\r\n      creature takes a <mark>minute to reogranise</mark> its belongings,{' '}\r\n      <mark>retrieving a stowed item is a full-round action</mark>\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default TrippingTelekinesisEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport Spell from '../../common/spellDisplay.component';\r\nimport VM, { dist } from '../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const utterDarkness = {\r\n  table: 1,\r\n  percentileMin: 45,\r\n  percentileMax: 48,\r\n  title: 'Utter Darkness',\r\n  createVariables: cr => ({\r\n    duration: makeConstantVariable(cr * 10 * 10, '10 min./level'),\r\n    radius: makeConstantVariable(cr * 10, 'CR x 10ft.'),\r\n    casterLevel: makeConstantVariable(cr, 'CL = CR'),\r\n  }),\r\n};\r\n\r\nconst UtterDarknessEvent = ({ event }) => {\r\n  const { casterLevel, radius } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A <VM v={radius} u={dist} /> radius area becomes utterly dark, as if from\r\n      a <Spell name=\"Deeper Darkness\" casterLevel={casterLevel} />\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default UtterDarknessEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, {\r\n  dist,\r\n  reflexSave,\r\n  time,\r\n} from '../../common/variableMark.component';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n} from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const weightlessness = {\r\n  table: 2,\r\n  percentileMin: 65,\r\n  percentileMax: 77,\r\n  title: 'Weightlessness',\r\n  createVariables: () => ({\r\n    save: makeConstantVariable(20, 'DC 20 Reflex Save', 'Reflex Save'),\r\n    duration: makeVariable(6),\r\n    rate: makeConstantVariable(10, '10ft. per round'),\r\n  }),\r\n};\r\n\r\nconst WeightlessnessEvent = ({ event }) => {\r\n  const { save, duration, rate } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A high-pitched ringing accompanies a feeling of weightlessness, and{' '}\r\n      <mark>\r\n        any creature that would have been targeted by the effect that triggered\r\n        this Primal Magic event\r\n      </mark>{' '}\r\n      must succeed at a <VM v={save} u={reflexSave} /> or float straight up at a\r\n      rate of <VM v={rate} u={dist} /> per round for{' '}\r\n      <VM v={duration} u={time} />. Creatures may attempt to grab hold of nearby\r\n      objects to slow or halt their ascent at the GM&apos;s discretion.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default WeightlessnessEvent;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport VM, { dist, time } from '../../common/variableMark.component';\r\nimport { makeConstantVariable } from '../../state/activePrimalEvents/activePrimalEventsState';\r\n\r\nexport const zoneOfUnluck = {\r\n  table: 1,\r\n  percentileMin: 15,\r\n  percentileMax: 18,\r\n  title: 'Zone of Unluck',\r\n  createVariables: cr => ({\r\n    radius: makeConstantVariable(cr * 5, 'CR x 5ft.'),\r\n    duration: makeConstantVariable(cr * 10 * 60, 'CR hours'),\r\n  }),\r\n};\r\n\r\nconst ZoneOfUnluckEvent = ({ event }) => {\r\n  const { radius, duration } = event.variables;\r\n  return (\r\n    <Typography>\r\n      A zone of unluck and a strange pale violet radience equivalent to\r\n      candlelight fills a <VM v={radius} u={dist} /> radius for{' '}\r\n      <VM v={duration} u={time} />. All <mark>d20 rolls</mark> made in the must\r\n      be <mark>rolled twice, taking the lower</mark> of the two rolls.\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ZoneOfUnluckEvent;\r\n","import React from 'react';\r\nimport AuroraBorealisEvent, {\r\n  auroraBorealis,\r\n} from '../auroraBorealisEvent.component';\r\nimport BlackTentaclesEvent, {\r\n  blackTentacles,\r\n} from '../blackTentaclesEvent.component';\r\nimport BoomingCannonsEvent, {\r\n  boomingCannons,\r\n} from '../boomingCannonsEvent.component';\r\nimport CatchyMusicEvent, { catchyMusic } from '../catchyMusicEvent.component';\r\nimport CentipedesEvent, { centipedes } from '../centipedesEvent.component';\r\nimport ColourDrainEvent, { colourDrain } from '../colourDrainEvent.component';\r\nimport ElementalGrudgeEvent, {\r\n  elementalGrudge,\r\n} from '../elementalGrudgeEvent.component';\r\nimport ElementalUprisingEvent, {\r\n  elementalUprising,\r\n} from '../elementalUprisingEvent.component';\r\nimport EnantiomaticSelfEvent, {\r\n  enantiomaticSelf,\r\n} from '../enantiomaticSelfEvent.component';\r\nimport EnergeticTouchEvent, {\r\n  energeticTouch,\r\n} from '../energeticTouchEvent.component';\r\nimport EnergyStormEvent, { energyStorm } from '../energyStormEvent.component';\r\nimport ExtradimensionalPitEvent, {\r\n  extradimensionalPit,\r\n} from '../extradimensionalPit.component';\r\nimport ForgeOfCriticalsEvent, {\r\n  forgeOfCriticals,\r\n} from '../forgeOfCriticals.component';\r\nimport HarmEvent, { harm } from '../harmEvent.component';\r\nimport HealEvent, { heal } from '../healEvent.component';\r\nimport IcyDreadEvent, { icyDread } from '../icyDread.component';\r\nimport MagicJarEvent, { magicJar } from '../magicJarEvent.component';\r\nimport MagneticFieldEvent, {\r\n  magneticField,\r\n} from '../magneticFieldEvent.component';\r\nimport MassDelusionEvent, {\r\n  massDelusion,\r\n} from '../massDelusionEvent.component';\r\nimport OrbOfGreaseEvent, { orbOfGrease } from '../orbOfGreaseEvent.component';\r\nimport RainOfSmallObjectsEvent, {\r\n  rainOfSmallObjects,\r\n} from '../rainOfSmallObjectsEvent.component';\r\nimport TeleportationStormEvent, {\r\n  teleportationStorm,\r\n} from '../teleportationStormEvent.component';\r\nimport TrippingTelekinesisEvent, {\r\n  trippingTelekinesis,\r\n} from '../trippingTelekinesisEvent.component';\r\nimport UtterDarknessEvent, {\r\n  utterDarkness,\r\n} from '../utterDarknessEvent.component';\r\nimport WeightlessnessEvent, {\r\n  weightlessness,\r\n} from '../weightlessnessEvent.component';\r\nimport WonderousMagicEvent, {\r\n  wonderousMagic,\r\n} from '../wonderousMagicEvent.component';\r\nimport ZoneOfUnluckEvent, {\r\n  zoneOfUnluck,\r\n} from '../zoneOfUnluckEvent.component';\r\n\r\nexport const getLimitedEventCardContent = event => {\r\n  if (event.title === colourDrain.title) {\r\n    return <ColourDrainEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === centipedes.title) {\r\n    return <CentipedesEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === catchyMusic.title) {\r\n    return <CatchyMusicEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === zoneOfUnluck.title) {\r\n    return <ZoneOfUnluckEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === enantiomaticSelf.title) {\r\n    return <EnantiomaticSelfEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === extradimensionalPit.title) {\r\n    return <ExtradimensionalPitEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === rainOfSmallObjects.title) {\r\n    return <RainOfSmallObjectsEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === heal.title) {\r\n    return <HealEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === harm.title) {\r\n    return <HarmEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === utterDarkness.title) {\r\n    return <UtterDarknessEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === elementalUprising.title) {\r\n    return <ElementalUprisingEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === auroraBorealis.title) {\r\n    return <AuroraBorealisEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === massDelusion.title) {\r\n    return <MassDelusionEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === energyStorm.title) {\r\n    return <EnergyStormEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === trippingTelekinesis.title) {\r\n    return <TrippingTelekinesisEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === wonderousMagic.title) {\r\n    return <WonderousMagicEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === teleportationStorm.title) {\r\n    return <TeleportationStormEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === magicJar.title) {\r\n    return <MagicJarEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === forgeOfCriticals.title) {\r\n    return <ForgeOfCriticalsEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === blackTentacles.title) {\r\n    return <BlackTentaclesEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === boomingCannons.title) {\r\n    return <BoomingCannonsEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === magneticField.title) {\r\n    return <MagneticFieldEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === energeticTouch.title) {\r\n    return <EnergeticTouchEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === weightlessness.title) {\r\n    return <WeightlessnessEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === icyDread.title) {\r\n    return <IcyDreadEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === elementalGrudge.title) {\r\n    return <ElementalGrudgeEvent event={event} />;\r\n  }\r\n\r\n  if (event.title === orbOfGrease.title) {\r\n    return <OrbOfGreaseEvent event={event} />;\r\n  }\r\n\r\n  return <div>UNKNOWN EVENT {event.title}</div>;\r\n};\r\n\r\nexport const limitedEvents = [\r\n  colourDrain,\r\n  centipedes,\r\n  catchyMusic,\r\n  zoneOfUnluck,\r\n  enantiomaticSelf,\r\n  extradimensionalPit,\r\n  rainOfSmallObjects,\r\n  heal,\r\n  harm,\r\n  utterDarkness,\r\n  elementalUprising,\r\n  auroraBorealis,\r\n  massDelusion,\r\n  energyStorm,\r\n  trippingTelekinesis,\r\n  wonderousMagic,\r\n  teleportationStorm,\r\n  magicJar,\r\n  forgeOfCriticals,\r\n  blackTentacles,\r\n  boomingCannons,\r\n  magneticField,\r\n  energeticTouch,\r\n  weightlessness,\r\n  icyDread,\r\n  elementalGrudge,\r\n  orbOfGrease,\r\n];\r\n\r\nexport const getLimitedEvent = (percentileRoll, tableRoll) => {\r\n  const eventsInRange = limitedEvents\r\n    .filter(e => e.table === tableRoll)\r\n    .filter(\r\n      e =>\r\n        percentileRoll >= e.percentileMin && percentileRoll <= e.percentileMax\r\n    );\r\n\r\n  if (eventsInRange.length === 0) {\r\n    return limitedEvents[0];\r\n  }\r\n\r\n  return eventsInRange[0];\r\n};\r\n","import { Avatar, Chip, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles({\r\n  chip: {\r\n    marginRight: 2,\r\n    backgroundColor: 'white',\r\n  },\r\n});\r\n\r\nconst CustomChip = ({ label, value }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Chip\r\n      className={classes.chip}\r\n      size=\"small\"\r\n      variant=\"outlined\"\r\n      avatar={value !== undefined ? <Avatar>{value}</Avatar> : null}\r\n      label={label}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CustomChip;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { currentRoundSelector } from '../state/rounds/roundsState';\r\nimport CustomChip from './customChip.component';\r\n\r\nconst DurationEndChip = ({ value }) => {\r\n  const currentRound = useSelector(currentRoundSelector);\r\n\r\n  if (value === undefined) {\r\n    return <CustomChip label=\"Instantaneous\" />;\r\n  }\r\n\r\n  const duration = value - currentRound;\r\n\r\n  if (value < 10 || duration < 10) {\r\n    return <CustomChip label=\"End\" value={value} />;\r\n  }\r\n\r\n  if (duration < 59 * 10) {\r\n    const durationInMins = Math.ceil(duration / 10);\r\n    const plural = durationInMins > 1;\r\n    return (\r\n      <CustomChip\r\n        label={`Min${plural ? 's' : ''} Remain${plural ? '' : 's'}`}\r\n        value={durationInMins}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (duration < 23 * 60 * 10) {\r\n    const durationInHours = Math.ceil(duration / 600);\r\n    const plural = durationInHours > 1;\r\n    return (\r\n      <CustomChip\r\n        label={`Hr${plural ? 's' : ''} Remain${plural ? '' : 's'}`}\r\n        value={`${durationInHours}`}\r\n      />\r\n    );\r\n  }\r\n\r\n  const durationInDays = Math.ceil(duration / (24 * 60 * 10));\r\n  const plural = durationInDays > 1;\r\n  return (\r\n    <CustomChip\r\n      label={`Day${plural ? 's' : ''} Remain${plural ? '' : 's'}`}\r\n      value={`${durationInDays}`}\r\n    />\r\n  );\r\n};\r\n\r\nexport default DurationEndChip;\r\n","import { Avatar, Chip, makeStyles, Tooltip } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { getToolTip } from './variableMark.component';\r\n\r\nconst useStyles = makeStyles({\r\n  chip: {\r\n    marginRight: 2,\r\n    backgroundColor: 'white',\r\n  },\r\n});\r\n\r\nconst VariableChip = ({ label, variable }) => {\r\n  const classes = useStyles();\r\n  const toolTip = getToolTip(variable);\r\n  const value = variable.result;\r\n  return (\r\n    <Chip\r\n      className={classes.chip}\r\n      size=\"small\"\r\n      variant=\"outlined\"\r\n      avatar={\r\n        <Tooltip title={toolTip} placement=\"bottom\">\r\n          <Avatar>{value}</Avatar>\r\n        </Tooltip>\r\n      }\r\n      label={label}\r\n    />\r\n  );\r\n};\r\n\r\nexport default VariableChip;\r\n","import { Box } from '@material-ui/core';\r\nimport React, { Fragment } from 'react';\r\nimport CustomChip from '../common/customChip.component';\r\nimport DurationEndChip from '../common/durationChip.component';\r\nimport { manualTriggerType } from '../state/triggerDialog/triggerDialogState';\r\nimport VariableChip from '../common/variableChip.component';\r\n\r\nconst getFinalRoundOrUndefined = (finalRound, duration) =>\r\n  duration && !(duration?.modifier === 0 && duration.result === 0)\r\n    ? finalRound\r\n    : undefined;\r\n\r\nconst EventCardChips = ({ event }) => {\r\n  const {\r\n    cr,\r\n    variables,\r\n    percentileRoll,\r\n    tableRoll,\r\n    startRound,\r\n    finalRound,\r\n    triggerType,\r\n  } = event;\r\n  const { duration, save, initiative } = variables;\r\n  const finalRoundDisplay = getFinalRoundOrUndefined(finalRound, duration);\r\n  return (\r\n    <Box>\r\n      <CustomChip label=\"Table\" value={tableRoll} />\r\n      <CustomChip label=\"d%\" value={percentileRoll} />\r\n      <VariableChip label=\"CR\" variable={cr} />\r\n      <CustomChip label=\"Start\" value={startRound} />\r\n      <DurationEndChip value={finalRoundDisplay} />\r\n      {save && <CustomChip label={save?.type ?? 'Save'} value={save.result} />}\r\n      {triggerType &&\r\n        (triggerType === manualTriggerType ? (\r\n          <CustomChip label=\"Manual Event\" />\r\n        ) : (\r\n          <Fragment>\r\n            <CustomChip label=\"Storm Event\" />\r\n            <VariableChip label=\"Init\" variable={initiative} />\r\n          </Fragment>\r\n        ))}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default EventCardChips;\r\n","import {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  IconButton,\r\n  makeStyles,\r\n} from '@material-ui/core';\r\nimport React from 'react';\r\nimport { eventImminant, eventActive } from '../common/colours';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport { useSelector } from 'react-redux';\r\nimport { currentRoundSelector } from '../state/rounds/roundsState';\r\nimport EventCardChips from './eventCardChips.component';\r\n\r\nconst useStyles = makeStyles({\r\n  card: {\r\n    width: '100%',\r\n  },\r\n  cardHeader: {\r\n    backgroundColor: ({ titleColour, expiresThisTurn }) =>\r\n      titleColour ?? (expiresThisTurn ? eventImminant : eventActive),\r\n    color: 'white',\r\n    alignItems: 'flex-start',\r\n    paddingTop: 3,\r\n    paddingBottom: 3,\r\n  },\r\n  expandAction: {\r\n    color: 'white',\r\n    height: '100%',\r\n    marginTop: 12,\r\n  },\r\n  cardContent: {\r\n    paddingTop: 5,\r\n    '&:last-child': {\r\n      paddingBottom: 5,\r\n    },\r\n  },\r\n});\r\n\r\nconst EventCard = ({\r\n  event,\r\n  titleColour,\r\n  onExpandToggleClicked,\r\n  getEventCardContent,\r\n}) => {\r\n  const { title, expanded, finalRound } = event;\r\n  const currentRound = useSelector(currentRoundSelector);\r\n  const expiresThisTurn = finalRound === currentRound;\r\n  const classes = useStyles({ titleColour, expiresThisTurn });\r\n\r\n  return (\r\n    <Card className={classes.card} variant=\"outlined\">\r\n      <CardHeader\r\n        className={classes.cardHeader}\r\n        title={title}\r\n        subheader={<EventCardChips event={event} />}\r\n        titleTypographyProps={{ variant: 'h6' }}\r\n        action={\r\n          <IconButton\r\n            className={classes.expandAction}\r\n            onClick={onExpandToggleClicked}\r\n            disableRipple\r\n          >\r\n            {expanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n          </IconButton>\r\n        }\r\n      />\r\n      {expanded && (\r\n        <CardContent className={classes.cardContent}>\r\n          {getEventCardContent(event)}\r\n        </CardContent>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nEventCard.defaultProps = {\r\n  titleColour: undefined,\r\n};\r\n\r\nexport default EventCard;\r\n","import { Box, Divider, makeStyles, Typography } from '@material-ui/core';\r\nimport { cyan } from '@material-ui/core/colors';\r\nimport React, { useState } from 'react';\r\nimport { rollTableDice } from '../../../random';\r\nimport {\r\n  makeConstantVariable,\r\n  makeLimitedVariable,\r\n} from '../../../state/activePrimalEvents/activePrimalEventsState';\r\nimport { calculateFinalRound } from '../../../state/manualTrigger/manualTriggerState.thunk';\r\nimport EventCard from '../../eventCard.component';\r\nimport { getLimitedEvent, getLimitedEventCardContent } from './limitedEvents';\r\n\r\nconst useStyles = makeStyles({\r\n  divider: {\r\n    width: '100%',\r\n    marginTop: 10,\r\n    marginBottom: 10,\r\n  },\r\n});\r\n\r\nconst prefixVariableKeys = (variables, prefix) => {\r\n  let newVariables = {};\r\n\r\n  Object.entries(variables).forEach(([key, value]) => {\r\n    newVariables[`${prefix}${key}`] = value;\r\n  });\r\n\r\n  return newVariables;\r\n};\r\n\r\nconst removeVariableKeyPrefix = (variables, prefix) => {\r\n  let newVariables = {\r\n    ...variables,\r\n  };\r\n\r\n  Object.entries(variables)\r\n    .filter(([key]) => key.startsWith(prefix))\r\n    .forEach(([key, value]) => {\r\n      newVariables[key.replace(prefix, '')] = value;\r\n    });\r\n\r\n  return newVariables;\r\n};\r\n\r\nconst longestDuration = (firstVars, secondVars) => {\r\n  const firstDuration = firstVars.oneduration;\r\n  const secondDuration = secondVars.twoduration;\r\n\r\n  if (!firstDuration && !secondDuration) {\r\n    return makeConstantVariable(0);\r\n  }\r\n\r\n  if (!secondDuration) {\r\n    return firstDuration;\r\n  }\r\n\r\n  if (!firstDuration) {\r\n    return secondDuration;\r\n  }\r\n\r\n  return firstDuration.result > secondDuration.result\r\n    ? firstDuration\r\n    : secondDuration;\r\n};\r\n\r\nexport const twoSimultaneousEvents = {\r\n  table: 1,\r\n  percentileMin: 99,\r\n  percentileMax: 100,\r\n  title: 'Two Simultaneous Events',\r\n  createVariables: cr => {\r\n    // Never allow either simultaneous event to be another two simultaneous events\r\n    const percentileOne = makeLimitedVariable(100, 98);\r\n    const tableOne = rollTableDice();\r\n    const percentileTwo = makeLimitedVariable(100, 98);\r\n    const tableTwo = rollTableDice();\r\n\r\n    const eventOne = getLimitedEvent(percentileOne.result, tableOne);\r\n    const eventOneVariables = prefixVariableKeys(\r\n      eventOne.createVariables(cr),\r\n      'one'\r\n    );\r\n\r\n    const eventTwo = getLimitedEvent(percentileTwo.result, tableTwo);\r\n    const eventTwoVariables = prefixVariableKeys(\r\n      eventTwo.createVariables(cr),\r\n      'two'\r\n    );\r\n\r\n    const duration = longestDuration(eventOneVariables, eventTwoVariables);\r\n\r\n    return {\r\n      duration: duration,\r\n      percentileOne,\r\n      percentileTwo,\r\n      ...eventOneVariables,\r\n      ...eventTwoVariables,\r\n    };\r\n  },\r\n};\r\n\r\nconst deconstructEvent = (\r\n  event,\r\n  isOpen,\r\n  percentile,\r\n  variables,\r\n  variablePrefix\r\n) => {\r\n  const title = getLimitedEvent(percentile).title;\r\n  const deconstructedEventVariables = removeVariableKeyPrefix(\r\n    variables,\r\n    variablePrefix\r\n  );\r\n  const finalRound = calculateFinalRound(\r\n    deconstructedEventVariables.duration,\r\n    event.startRound\r\n  );\r\n\r\n  return {\r\n    ...event,\r\n    title,\r\n    percentileRoll: percentile,\r\n    variables: deconstructedEventVariables,\r\n    expanded: isOpen,\r\n    finalRound,\r\n  };\r\n};\r\n\r\nconst TwoSimultaneousEventsEvent = ({ event }) => {\r\n  const classes = useStyles();\r\n  const { percentileOne, percentileTwo } = event.variables;\r\n\r\n  const [eventOneOpen, setEventOneOpen] = useState(true);\r\n  const [eventTwoOpen, setEventTwoOpen] = useState(true);\r\n  const eventOne = deconstructEvent(\r\n    event,\r\n    eventOneOpen,\r\n    percentileOne.result,\r\n    event.variables,\r\n    'one'\r\n  );\r\n  const eventTwo = deconstructEvent(\r\n    event,\r\n    eventTwoOpen,\r\n    percentileTwo.result,\r\n    event.variables,\r\n    'two'\r\n  );\r\n\r\n  return (\r\n    <Box>\r\n      <Typography>The following two events occur simultaneously</Typography>\r\n      <Divider className={classes.divider} />\r\n      <EventCard\r\n        event={eventOne}\r\n        titleColour={cyan['A700']}\r\n        onExpandToggleClicked={() => setEventOneOpen(!eventOneOpen)}\r\n        getEventCardContent={getLimitedEventCardContent}\r\n      />\r\n      <Divider className={classes.divider} />\r\n      <EventCard\r\n        event={eventTwo}\r\n        titleColour={cyan['A700']}\r\n        onExpandToggleClicked={() => setEventTwoOpen(!eventTwoOpen)}\r\n        getEventCardContent={getLimitedEventCardContent}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TwoSimultaneousEventsEvent;\r\n","import React from 'react';\r\nimport {\r\n  getLimitedEventCardContent,\r\n  limitedEvents,\r\n} from './eventComponents/twoSimlultaneousEvents/limitedEvents';\r\nimport TwoSimultaneousEventsEvent, {\r\n  twoSimultaneousEvents,\r\n} from './eventComponents/twoSimlultaneousEvents/twoSimultaneousEventsEvent.component';\r\n\r\nexport const getEventCardContent = event => {\r\n  if (event.title === twoSimultaneousEvents.title) {\r\n    return <TwoSimultaneousEventsEvent event={event} />;\r\n  }\r\n\r\n  return getLimitedEventCardContent(event);\r\n};\r\n\r\nexport const events = [...limitedEvents, twoSimultaneousEvents];\r\n\r\nexport const getEvent = (percentileRoll, tableRoll) => {\r\n  const eventsInRange = events\r\n    .filter(e => e.table === tableRoll)\r\n    .filter(\r\n      e =>\r\n        percentileRoll >= e.percentileMin && percentileRoll <= e.percentileMax\r\n    );\r\n\r\n  if (eventsInRange.length === 0) {\r\n    return events[0];\r\n  }\r\n\r\n  return eventsInRange[0];\r\n};\r\n\r\nexport const getEventByTitle = title => {\r\n  const eventsWithTitle = events.filter(e => e.title === title);\r\n\r\n  if (eventsWithTitle.length === 0) {\r\n    return events[0];\r\n  }\r\n\r\n  return eventsWithTitle[0];\r\n};\r\n","import { wonderousMagic } from '../../events/eventComponents/wonderousMagicEvent.component';\r\nimport { getEvent, getEventByTitle } from '../../events/events';\r\nimport { rollPercentile, rollTableDice } from '../../random';\r\nimport {\r\n  makeConstantVariable,\r\n  makeVariable,\r\n  primalEventInitialState,\r\n} from '../activePrimalEvents/activePrimalEventsState';\r\nimport { currentRoundSelector } from '../rounds/roundsState';\r\nimport {\r\n  manualTriggerType,\r\n  setTriggerDialogState,\r\n  triggerDialogInitialState,\r\n} from '../triggerDialog/triggerDialogState';\r\nimport {\r\n  alwaysSelectSameEventSelector,\r\n  alwaysSelectSameRodResultSelector,\r\n  eventAlwaysSelectedSelector,\r\n  eventsAlwaysTriggerSelector,\r\n  rodOfWonderAlwaysSelectedSelector,\r\n} from '../userSettings/userSetingsState';\r\nimport {\r\n  characterInitialState,\r\n  characterSelector,\r\n  saveManualTriggerCharacters,\r\n  setManualTriggerCharacter,\r\n  specifiedCrSelector,\r\n} from './manualTriggerState';\r\n\r\nexport const calculateFinalRound = (durationVariable, startRound) => {\r\n  const durationInRounds = durationVariable?.result;\r\n  return durationInRounds === undefined\r\n    ? undefined\r\n    : startRound + durationInRounds;\r\n};\r\n\r\nexport const generateEventVariablesWithDefaults = (\r\n  event,\r\n  crVal,\r\n  rodOfWonderResultAlwaysSelected\r\n) => ({\r\n  ...event.createVariables(crVal, rodOfWonderResultAlwaysSelected),\r\n  initiative: makeVariable(20, 1, 5),\r\n});\r\n\r\nexport const generateDialogEvent = (\r\n  percentile,\r\n  tableRoll,\r\n  cr,\r\n  startRound,\r\n  eventAlwaysSelected,\r\n  rodOfWonderResultAlwaysSelected,\r\n  triggerType\r\n) => {\r\n  const crVal = cr.result ?? cr;\r\n  const crVar = cr.result ? cr : makeConstantVariable(cr, 'CR = CL');\r\n  const correspondingEvent = eventAlwaysSelected\r\n    ? getEventByTitle(eventAlwaysSelected)\r\n    : getEvent(percentile, tableRoll);\r\n  const variables = generateEventVariablesWithDefaults(\r\n    correspondingEvent,\r\n    crVal,\r\n    rodOfWonderResultAlwaysSelected\r\n  );\r\n\r\n  const finalRound = calculateFinalRound(variables.duration, startRound);\r\n\r\n  return {\r\n    ...primalEventInitialState,\r\n    id: Date.now(),\r\n    title: correspondingEvent.title,\r\n    percentileRoll: eventAlwaysSelected\r\n      ? correspondingEvent.percentileMin\r\n      : percentile,\r\n    tableRoll: eventAlwaysSelected ? correspondingEvent.table : tableRoll,\r\n    cr: crVar,\r\n    startRound,\r\n    finalRound,\r\n    variables,\r\n    expanded: true,\r\n    triggerType,\r\n  };\r\n};\r\n\r\n// Thunk that handles all state when pressing the manual trigger button\r\n// Rolls a percentile, then generates the dialog state, and the event state if roll was high enought\r\n// Then opens the dialog with that state\r\nexport const manualTriggerThunk = () => (dispatch, getState) => {\r\n  const state = getState();\r\n  const percentile = rollPercentile();\r\n  const currentCr = specifiedCrSelector(state);\r\n  const dialogState = {\r\n    ...triggerDialogInitialState,\r\n    open: true,\r\n    triggerType: manualTriggerType,\r\n    percentile,\r\n    cr: currentCr,\r\n  };\r\n\r\n  const eventsAlwaysTrigger = eventsAlwaysTriggerSelector(state);\r\n\r\n  if (eventsAlwaysTrigger || percentile <= dialogState.threshold) {\r\n    const currentRound = currentRoundSelector(state);\r\n    const alwaysShowSameEvent = alwaysSelectSameEventSelector(state);\r\n    const eventAlwaysSelected = alwaysShowSameEvent\r\n      ? eventAlwaysSelectedSelector(state)\r\n      : undefined;\r\n    const alwaysShowSameRodResult = alwaysSelectSameRodResultSelector(state);\r\n    const rodOfWonderResultAlwaysSelected =\r\n      eventAlwaysSelected === wonderousMagic.title && alwaysShowSameRodResult\r\n        ? rodOfWonderAlwaysSelectedSelector(state)\r\n        : undefined;\r\n\r\n    const eventPercentile = rollPercentile();\r\n    const tableRoll = rollTableDice();\r\n    const event = generateDialogEvent(\r\n      eventPercentile,\r\n      tableRoll,\r\n      currentCr,\r\n      currentRound,\r\n      eventAlwaysSelected,\r\n      rodOfWonderResultAlwaysSelected,\r\n      dialogState.triggerType\r\n    );\r\n    dialogState.currentEvent = event;\r\n  }\r\n\r\n  dispatch(setTriggerDialogState(dialogState));\r\n};\r\n\r\nexport const saveManualTriggerCharactersThunk = characters => (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const state = getState();\r\n  const currentCharacter = characterSelector(state);\r\n\r\n  if (!characters.find(c => c.id === currentCharacter.id)) {\r\n    dispatch(setManualTriggerCharacter(characterInitialState.id));\r\n  }\r\n\r\n  dispatch(saveManualTriggerCharacters(characters));\r\n};\r\n","import { IconButton, TableCell, TableRow, TextField } from '@material-ui/core';\r\nimport React from 'react';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { characterInitialState } from '../state/manualTrigger/manualTriggerState';\r\n\r\nconst isEmptyOrSpace = value => {\r\n  return value === undefined || value === null || value.match(/^ *$/) !== null;\r\n};\r\n\r\nexport const characterDataErrors = characterData => {\r\n  const nameError = isEmptyOrSpace(characterData?.name);\r\n\r\n  const clError =\r\n    characterData?.cl === null ||\r\n    characterData?.cl === undefined ||\r\n    characterData?.cl < 1 ||\r\n    characterData?.cl > 20;\r\n\r\n  return [nameError, clError];\r\n};\r\n\r\nconst CharacterRow = ({ characterData, onUpdate, onDelete }) => {\r\n  const [nameError, clError] = characterDataErrors(characterData);\r\n\r\n  const onNameChanged = event => {\r\n    const value = event.target.value;\r\n    const newData = { ...characterData, name: value };\r\n    onUpdate(newData);\r\n  };\r\n\r\n  const onClChanged = event => {\r\n    const value = event.target.value;\r\n    const number = value === undefined ? undefined : parseInt(value);\r\n    const newData = { ...characterData, cl: number };\r\n    onUpdate(newData);\r\n  };\r\n\r\n  const isOtherCharacter = characterData.id === characterInitialState.id;\r\n\r\n  const conditionalOnDelete = () => {\r\n    if (isOtherCharacter) {\r\n      return;\r\n    }\r\n\r\n    onDelete(characterData);\r\n  };\r\n\r\n  return (\r\n    <TableRow key={characterData.id}>\r\n      <TableCell padding=\"none\">\r\n        <TextField\r\n          disabled={isOtherCharacter}\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          margin=\"dense\"\r\n          inputProps={{ style: { textAlign: 'center' } }}\r\n          error={nameError}\r\n          helperText={nameError ? 'Must be entered' : ''}\r\n          value={characterData?.name}\r\n          onChange={onNameChanged}\r\n        />\r\n      </TableCell>\r\n      <TableCell padding=\"none\">\r\n        <TextField\r\n          disabled={isOtherCharacter}\r\n          style={{ marginLeft: 5 }}\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          margin=\"dense\"\r\n          type=\"number\"\r\n          error={clError}\r\n          inputProps={{\r\n            style: {\r\n              textAlign: 'center',\r\n            },\r\n          }}\r\n          helperText={clError ? 'Must be between 1 and 20' : ''}\r\n          value={characterData?.cl}\r\n          onChange={onClChanged}\r\n        />\r\n      </TableCell>\r\n      <TableCell padding=\"none\">\r\n        <IconButton\r\n          disableRipple\r\n          onClick={conditionalOnDelete}\r\n          disabled={isOtherCharacter}\r\n        >\r\n          <DeleteIcon />\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nexport default CharacterRow;\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport {\r\n  userSettingsHeader,\r\n  userSettingsHeaderEmphasis,\r\n} from '../common/colours';\r\nimport CharacterRow, { characterDataErrors } from './characterRow.component';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { charactersSelector } from '../state/manualTrigger/manualTriggerState';\r\nimport { saveManualTriggerCharactersThunk } from '../state/manualTrigger/manualTriggerState.thunk';\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n  },\r\n  manageButton: {\r\n    color: blue[500],\r\n    marginRight: 10,\r\n  },\r\n  dialogTitle: {\r\n    backgroundColor: userSettingsHeader,\r\n    color: 'white',\r\n    textAlign: 'center',\r\n  },\r\n  dialogActions: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  headerCell: {\r\n    textAlign: 'center',\r\n  },\r\n  saveButton: {\r\n    backgroundColor: userSettingsHeader,\r\n    color: 'white',\r\n    '&:hover': {\r\n      backgroundColor: userSettingsHeaderEmphasis,\r\n    },\r\n  },\r\n});\r\n\r\nconst ManageCharacters = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const currentCharacters = useSelector(charactersSelector);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [data, setData] = useState(currentCharacters);\r\n\r\n  useEffect(() => {\r\n    setData(currentCharacters);\r\n  }, [currentCharacters, setData]);\r\n\r\n  const dataHasAnyErrors = data\r\n    .map(c => characterDataErrors(c))\r\n    .some(e => e[0] || e[1]);\r\n\r\n  const onUpdate = newEntry => {\r\n    const newData = data.map(entry =>\r\n      entry.id === newEntry.id ? newEntry : entry\r\n    );\r\n    setData(newData);\r\n  };\r\n\r\n  const onDelete = deleteEntry => {\r\n    const deleteId = deleteEntry.id;\r\n    const newData = data\r\n      .map(entry => (entry.id === deleteId ? undefined : entry))\r\n      .filter(entry => !!entry);\r\n    setData(newData);\r\n  };\r\n\r\n  const onAdd = () => {\r\n    setData([...data, { id: Date.now(), name: '', cl: 0 }]);\r\n  };\r\n\r\n  const onSaveAndClose = () => {\r\n    dispatch(saveManualTriggerCharactersThunk(data));\r\n\r\n    setDialogOpen(false);\r\n  };\r\n\r\n  const onCancel = () => {\r\n    setDialogOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.container}>\r\n      <Typography>Characters</Typography>\r\n      <Button\r\n        disableRipple\r\n        className={classes.manageButton}\r\n        onClick={() => setDialogOpen(true)}\r\n      >\r\n        (Manage)\r\n      </Button>\r\n      <Dialog fullWidth open={dialogOpen}>\r\n        <DialogTitle className={classes.dialogTitle}>\r\n          Manage Characters\r\n        </DialogTitle>\r\n        <DialogContent className={classes.dialogActions}>\r\n          <TableContainer>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell className={classes.headerCell}>\r\n                    Character Name\r\n                  </TableCell>\r\n                  <TableCell className={classes.headerCell}>\r\n                    Caster Level\r\n                  </TableCell>\r\n                  <TableCell className={classes.headerCell}>Delete</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {data.map(entry => (\r\n                  <CharacterRow\r\n                    key={entry.id}\r\n                    characterData={entry}\r\n                    onUpdate={onUpdate}\r\n                    onDelete={onDelete}\r\n                  />\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          <Tooltip title=\"Add a new character to the bottom of this list\">\r\n            <IconButton onClick={onAdd}>\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            disabled={dataHasAnyErrors}\r\n            className={classes.saveButton}\r\n            variant=\"contained\"\r\n            onClick={onSaveAndClose}\r\n          >\r\n            Save & Close\r\n          </Button>\r\n          <Button variant=\"contained\" onClick={onCancel}>\r\n            Cancel\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ManageCharacters;\r\n","import React from 'react';\r\nimport {\r\n  FormControl,\r\n  FormControlLabel,\r\n  makeStyles,\r\n  Radio,\r\n  RadioGroup,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  characterInitialState,\r\n  characterSelector,\r\n  charactersSelector,\r\n  setManualTriggerCharacter,\r\n} from '../state/manualTrigger/manualTriggerState';\r\nimport ManageCharacters from './manageCharacters.component';\r\n\r\nconst useStyles = makeStyles({\r\n  radioContainer: {\r\n    overflowY: 'auto',\r\n    overflowX: 'hidden',\r\n    height: '100%',\r\n    width: 'calc(100% - 20px)',\r\n    paddingLeft: 20,\r\n  },\r\n});\r\n\r\nconst CharacterSwitch = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const currentCharacter = useSelector(characterSelector);\r\n  const currentCharacters = useSelector(charactersSelector);\r\n\r\n  const handleCharacterChanged = event => {\r\n    const selected = event?.target?.value ?? characterInitialState.id;\r\n    dispatch(setManualTriggerCharacter(selected));\r\n  };\r\n\r\n  return (\r\n    <FormControl className={classes.radioContainer}>\r\n      <ManageCharacters />\r\n      <RadioGroup value={currentCharacter.id} onChange={handleCharacterChanged}>\r\n        {Object.entries(currentCharacters).map(([_, value]) => (\r\n          <FormControlLabel\r\n            labelPlacement=\"end\"\r\n            key={value.id}\r\n            value={value.id}\r\n            control={<Radio color=\"default\" />}\r\n            label={\r\n              <Typography noWrap className={classes.characterNameText}>\r\n                {value.name}\r\n                {value.id === characterInitialState.id\r\n                  ? ''\r\n                  : ` (CL ${value.cl})`}\r\n              </Typography>\r\n            }\r\n          />\r\n        ))}\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default CharacterSwitch;\r\n","import React from 'react';\r\nimport { Grid, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  characterInitialState,\r\n  characterSelector,\r\n  setManualTriggerCr,\r\n  specifiedCrSelector,\r\n} from '../state/manualTrigger/manualTriggerState';\r\n\r\nconst useStyles = makeStyles({\r\n  inputContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    padding: 20,\r\n  },\r\n  input: {\r\n    textAlign: 'center',\r\n  },\r\n  label: {\r\n    marginTop: 5,\r\n  },\r\n});\r\n\r\nconst CrInput = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const currentCharacter = useSelector(characterSelector);\r\n  const disabled = currentCharacter?.name !== characterInitialState.name;\r\n  const currentCr = useSelector(specifiedCrSelector);\r\n  const crError = !disabled && (currentCr > 20 || currentCr < 1);\r\n  const crErrorLabel = !disabled && crError ? 'between 1 and 20' : null;\r\n\r\n  const onCrChanged = event => {\r\n    const value = event.target.value;\r\n    const number = value === undefined ? undefined : parseInt(value);\r\n    dispatch(setManualTriggerCr(number));\r\n  };\r\n\r\n  return (\r\n    <Grid className={classes.inputContainer} container spacing={1}>\r\n      <Grid item>\r\n        <Typography className={classes.label}>CR / CL:</Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <TextField\r\n          disabled={disabled}\r\n          error={crError}\r\n          helperText={crErrorLabel}\r\n          type=\"number\"\r\n          InputLabelProps={{\r\n            hidden: true,\r\n          }}\r\n          inputProps={{\r\n            className: classes.input,\r\n          }}\r\n          value={currentCr}\r\n          onChange={onCrChanged}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default CrInput;\r\n","import { Box, Button, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport BarHeader from '../common/barHeader.component';\r\nimport { manualTriggerHeader } from '../common/colours';\r\nimport { manualTriggerThunk } from '../state/manualTrigger/manualTriggerState.thunk';\r\nimport CharacterSwitch from './characterSwitch.component';\r\nimport CrInput from './crInput.component';\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    height: '100%',\r\n    width: '100%',\r\n    alignItems: 'flex-start',\r\n  },\r\n  footer: {\r\n    margin: 20,\r\n    alignSelf: 'center',\r\n  },\r\n});\r\n\r\nconst ManualTriggerBar = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const onManualTriggerClicked = () => {\r\n    dispatch(manualTriggerThunk());\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.container}>\r\n      <BarHeader title=\"Manual Trigger\" colour={manualTriggerHeader} />\r\n      <CrInput />\r\n      <CharacterSwitch />\r\n      <Box className={classes.footer}>\r\n        <Button variant=\"contained\" onClick={onManualTriggerClicked}>\r\n          Manually Trigger Event\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ManualTriggerBar;\r\n","// Thunk that handles all state when toggling all expanded or not\r\n\r\nimport {\r\n  collapseAll,\r\n  expandAll,\r\n  toggleSingleExpanded,\r\n} from '../activePrimalEvents/activePrimalEventsState';\r\nimport {\r\n  allExpandedSelector,\r\n  setAllExpandedState,\r\n} from './eventExpansionState';\r\n\r\n// If tristate 'allExpanded' is undefined (i.e. some expanded some not) then it will expand all\r\nexport const toggleAllExpandedThunk = () => (dispatch, getState) => {\r\n  if (!allExpandedSelector(getState())) {\r\n    dispatch(setAllExpandedState(true));\r\n    dispatch(expandAll());\r\n  } else {\r\n    dispatch(setAllExpandedState(false));\r\n    dispatch(collapseAll());\r\n  }\r\n};\r\n\r\n// Thunk that handles all state when toggling a single event\r\n// Sets tristate 'allExpanded' to undefined (i.e. some are expanded, some not)\r\n// May need to reconsider this last part because what if you toggle one so they're all expanded/collapsed...\r\nexport const toggleSingleExpandedThunk = id => dispatch => {\r\n  dispatch(toggleSingleExpanded(id));\r\n  dispatch(setAllExpandedState(undefined));\r\n};\r\n","import React from 'react';\r\nimport { Box, List, ListItem, makeStyles } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { toggleSingleExpandedThunk } from '../state/eventExpansionState/eventExpansionState.thunk';\r\nimport { activePrimalEventsSelector } from '../state/activePrimalEvents/activePrimalEventsState';\r\nimport EventCard from '../events/eventCard.component';\r\nimport { getEventCardContent } from '../events/events';\r\n\r\nconst useStyles = makeStyles({\r\n  content: {\r\n    height: '100%',\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'flex-start',\r\n    overflow: 'auto',\r\n  },\r\n});\r\n\r\nconst ActivePrimalEventsListContent = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const activePrimalEvents = useSelector(activePrimalEventsSelector);\r\n\r\n  const toggleSingleClicked = primalEvent => () => {\r\n    dispatch(toggleSingleExpandedThunk(primalEvent.id));\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.content}>\r\n      {activePrimalEvents.length > 0 && (\r\n        <List>\r\n          {activePrimalEvents.map(primalEvent => (\r\n            <ListItem key={primalEvent.id}>\r\n              <EventCard\r\n                event={primalEvent}\r\n                onExpandToggleClicked={toggleSingleClicked(primalEvent)}\r\n                getEventCardContent={getEventCardContent}\r\n              />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ActivePrimalEventsListContent;\r\n","export default __webpack_public_path__ + \"static/media/primal_magic_flowchart.9bdbe203.png\";","import { Button, Dialog, DialogContent, makeStyles } from '@material-ui/core';\r\nimport React, { Fragment, useState } from 'react';\r\nimport primalMagicFlowchart from '../images/primal_magic_flowchart.png';\r\n\r\nconst useStyles = makeStyles({\r\n  footerButton: {\r\n    marginLeft: 10,\r\n    marginRight: 10,\r\n  },\r\n  image: {\r\n    height: '100%',\r\n  },\r\n  dailogPaper: {\r\n    maxHeight: 'calc(100% - 10px)',\r\n    maxWidth: 'calc(100% - 10px)',\r\n  },\r\n  dialogContent: {\r\n    height: '100vh',\r\n    overflowY: 'hidden',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    '&:first-child': {\r\n      padding: 5,\r\n    },\r\n  },\r\n});\r\n\r\nconst FlowchartDisplay = () => {\r\n  const classes = useStyles();\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n  const onOpen = () => {\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setDialogOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.footerButton}\r\n        variant=\"contained\"\r\n        onClick={onOpen}\r\n      >\r\n        Flowchart\r\n      </Button>\r\n      <Dialog\r\n        maxWidth={false}\r\n        open={dialogOpen}\r\n        onClose={onClose}\r\n        PaperProps={{ className: classes.dailogPaper }}\r\n      >\r\n        <DialogContent className={classes.dialogContent}>\r\n          <img className={classes.image} src={primalMagicFlowchart} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FlowchartDisplay;\r\n","import {\r\n  Button,\r\n  Checkbox,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControlLabel,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n} from '@material-ui/core';\r\nimport React, { Fragment, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  alwaysSelectSameEventSelector,\r\n  eventAlwaysSelectedSelector,\r\n  eventsAlwaysTriggerSelector,\r\n  rodOfWonderAlwaysSelectedSelector,\r\n  resetOnlyResetsRoundsSelector,\r\n  setAlwaysSelectSameEvent,\r\n  setEventAlwaysSelected,\r\n  setEventsAlwaysTrigger,\r\n  setRodOfWonderAlwaysSelected,\r\n  setResetOnlyResetsRounds,\r\n  alwaysSelectSameRodResultSelector,\r\n  setAlwaysSelectSameRodResult,\r\n} from '../state/userSettings/userSetingsState';\r\nimport { events } from '../events/events';\r\nimport { userSettingsHeader } from '../common/colours';\r\nimport { wonderousMagic } from '../events/eventComponents/wonderousMagicEvent.component';\r\nimport { rodOfWonderResults } from '../events/eventComponents/rodOfWonderResults/rodOfWonderResults';\r\n\r\nconst useStyles = makeStyles({\r\n  footerButton: {\r\n    marginLeft: 10,\r\n    marginRight: 10,\r\n  },\r\n  dialogContent: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    minWidth: 550,\r\n  },\r\n  dialogHeader: {\r\n    backgroundColor: userSettingsHeader,\r\n    color: 'white',\r\n    textAlign: 'center',\r\n  },\r\n  dropDown: {\r\n    marginLeft: 5,\r\n    minWidth: 215,\r\n  },\r\n});\r\n\r\nconst UserSettings = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n  const eventsAlwaysTrigger = useSelector(eventsAlwaysTriggerSelector);\r\n  const alwaysSelectSameEvent = useSelector(alwaysSelectSameEventSelector);\r\n  const eventAlwaysSelected = useSelector(eventAlwaysSelectedSelector);\r\n  const eventIsRodOfWonder =\r\n    alwaysSelectSameEvent && eventAlwaysSelected === wonderousMagic.title;\r\n  const rodResultAlwaysSelected = useSelector(\r\n    alwaysSelectSameRodResultSelector\r\n  );\r\n  const rodOfWonderAlwaysSelected = useSelector(\r\n    rodOfWonderAlwaysSelectedSelector\r\n  );\r\n  const resetOnlyResetsRounds = useSelector(resetOnlyResetsRoundsSelector);\r\n\r\n  const onUserSettingsClicked = () => {\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setDialogOpen(false);\r\n  };\r\n\r\n  const eventsAlwaysTriggerClicked = event => {\r\n    const value = event.target.checked;\r\n    dispatch(setEventsAlwaysTrigger(value));\r\n  };\r\n\r\n  const alwaysSelectSameEventClicked = event => {\r\n    const value = event.target.checked;\r\n    dispatch(setAlwaysSelectSameEvent(value));\r\n  };\r\n\r\n  const sameEventSelected = event => {\r\n    const value = event.target.value;\r\n    dispatch(setEventAlwaysSelected(value));\r\n  };\r\n\r\n  const alwaysSelectSameRodResultClicked = event => {\r\n    const value = event.target.checked;\r\n    dispatch(setAlwaysSelectSameRodResult(value));\r\n  };\r\n\r\n  const sameRodOfWonderSelected = event => {\r\n    const value = event.target.value;\r\n    dispatch(setRodOfWonderAlwaysSelected(value));\r\n  };\r\n\r\n  const resetOnlyResetsRoundsClicked = event => {\r\n    const value = event.target.checked;\r\n    dispatch(setResetOnlyResetsRounds(value));\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.footerButton}\r\n        variant=\"contained\"\r\n        onClick={onUserSettingsClicked}\r\n      >\r\n        Settings\r\n      </Button>\r\n      <Dialog open={dialogOpen} onClose={onClose}>\r\n        <DialogTitle className={classes.dialogHeader}>\r\n          User Settings\r\n        </DialogTitle>\r\n        <DialogContent className={classes.dialogContent}>\r\n          <FormControlLabel\r\n            label=\"'Reset' Only Resets Current Round\"\r\n            labelPlacement=\"start\"\r\n            control={\r\n              <Checkbox\r\n                color=\"default\"\r\n                checked={resetOnlyResetsRounds}\r\n                onChange={resetOnlyResetsRoundsClicked}\r\n              />\r\n            }\r\n          />\r\n          <FormControlLabel\r\n            label=\"Events Always Trigger\"\r\n            labelPlacement=\"start\"\r\n            control={\r\n              <Checkbox\r\n                color=\"default\"\r\n                checked={eventsAlwaysTrigger}\r\n                onChange={eventsAlwaysTriggerClicked}\r\n              />\r\n            }\r\n          />\r\n          <FormControlLabel\r\n            label=\"Always Show Same Event\"\r\n            labelPlacement=\"start\"\r\n            control={\r\n              <Checkbox\r\n                color=\"default\"\r\n                checked={alwaysSelectSameEvent}\r\n                onChange={alwaysSelectSameEventClicked}\r\n              />\r\n            }\r\n          />\r\n          {alwaysSelectSameEvent && (\r\n            <FormControlLabel\r\n              label=\"Same Event Shown:\"\r\n              labelPlacement=\"start\"\r\n              control={\r\n                <Select\r\n                  variant=\"outlined\"\r\n                  className={classes.dropDown}\r\n                  value={eventAlwaysSelected}\r\n                  onChange={sameEventSelected}\r\n                >\r\n                  {events\r\n                    .sort((a, b) => a.percentileMin - b.percentileMin)\r\n                    .sort((a, b) => a.table - b.table)\r\n                    .map(event => (\r\n                      <MenuItem key={event.title} value={event.title}>\r\n                        Table {event.table}, {event.percentileMin}-\r\n                        {event.percentileMax}% - {event.title}\r\n                      </MenuItem>\r\n                    ))}\r\n                </Select>\r\n              }\r\n            />\r\n          )}\r\n          {eventIsRodOfWonder && (\r\n            <FormControlLabel\r\n              label=\"Always Show Same Rod Of Wonder Result\"\r\n              labelPlacement=\"start\"\r\n              control={\r\n                <Checkbox\r\n                  color=\"default\"\r\n                  checked={rodResultAlwaysSelected}\r\n                  onChange={alwaysSelectSameRodResultClicked}\r\n                />\r\n              }\r\n            />\r\n          )}\r\n          {eventIsRodOfWonder && rodResultAlwaysSelected && (\r\n            <FormControlLabel\r\n              label=\"Same Rod Of Wonder Result Shown:\"\r\n              labelPlacement=\"start\"\r\n              control={\r\n                <Select\r\n                  variant=\"outlined\"\r\n                  className={classes.dropDown}\r\n                  value={rodOfWonderAlwaysSelected}\r\n                  onChange={sameRodOfWonderSelected}\r\n                >\r\n                  {rodOfWonderResults.map(result => (\r\n                    <MenuItem key={result.title} value={result.title}>\r\n                      {result.title}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              }\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default UserSettings;\r\n","import { Box, Button, makeStyles } from '@material-ui/core';\r\nimport React, { Fragment } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport FlowchartDisplay from './flowchartDisplay.component';\r\nimport UserSettings from './userSettings.component';\r\n\r\nconst useStyles = makeStyles({\r\n  footer: {\r\n    margin: 20,\r\n  },\r\n  footerButton: {\r\n    marginLeft: 10,\r\n    marginRight: 10,\r\n  },\r\n});\r\n\r\nconst ActivePrimalEventsListFooter = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box className={classes.footer}>\r\n        <UserSettings />\r\n        <FlowchartDisplay />\r\n        <Button\r\n          className={classes.footerButton}\r\n          component={NavLink}\r\n          variant=\"contained\"\r\n          to=\"/\"\r\n        >\r\n          Home\r\n        </Button>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ActivePrimalEventsListFooter;\r\n","import React from 'react';\r\nimport { Box, IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { activePrimalEventsSelector } from '../state/activePrimalEvents/activePrimalEventsState';\r\nimport { allExpandedSelector } from '../state/eventExpansionState/eventExpansionState';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport { primalEventsHeader } from '../common/colours';\r\nimport { toggleAllExpandedThunk } from '../state/eventExpansionState/eventExpansionState.thunk';\r\n\r\nconst useStyles = makeStyles({\r\n  header: {\r\n    paddingTop: 4,\r\n    paddingBottom: 5,\r\n    width: '100%',\r\n    textAlign: 'center',\r\n    backgroundColor: primalEventsHeader,\r\n    color: 'white',\r\n    borderTopLeftRadius: 2,\r\n    borderTopRightRadius: 2,\r\n  },\r\n  subtitleContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n  },\r\n  subtitle: {\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n  },\r\n  expandButton: {\r\n    color: 'white',\r\n    backgroundColor: 'transparent',\r\n    '&:hover': {\r\n      backgroundColor: 'transparent',\r\n    },\r\n  },\r\n  headerText: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n});\r\n\r\nconst ActivePrimalEventsListHeader = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const activePrimalEvents = useSelector(activePrimalEventsSelector);\r\n  const allExpanded = useSelector(allExpandedSelector);\r\n\r\n  const toggleAllClicked = () => {\r\n    dispatch(toggleAllExpandedThunk());\r\n  };\r\n\r\n  const buildExpandIcon = expanded => {\r\n    if (expanded === undefined) {\r\n      return <RemoveIcon />;\r\n    }\r\n\r\n    if (!expanded) {\r\n      return <ExpandMoreIcon />;\r\n    }\r\n\r\n    return <ExpandLessIcon />;\r\n  };\r\n\r\n  const buildExpandButton = expanded => {\r\n    return (\r\n      <IconButton\r\n        disableRipple\r\n        className={classes.expandButton}\r\n        onClick={toggleAllClicked}\r\n      >\r\n        {buildExpandIcon(expanded)}\r\n      </IconButton>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.header}>\r\n      <Box className={classes.headerText}>\r\n        {buildExpandButton(allExpanded)}\r\n        <Typography variant=\"h4\">Active Primal Events</Typography>\r\n        {buildExpandButton(allExpanded)}\r\n      </Box>\r\n      <Box className={classes.subtitleContainer}>\r\n        <Typography className={classes.subtitle}>\r\n          Active Primal Magic Events: {activePrimalEvents.length}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ActivePrimalEventsListHeader;\r\n","import { Box, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport ActivePrimalEventsListContent from './activePrimalEventsListContent.component';\r\nimport ActivePrimalEventsListFooter from './activePrimalEventsListFooter.content';\r\nimport ActivePrimalEventsListHeader from './activePrimalEventsListHeader.component';\r\n\r\nconst useStyles = makeStyles({\r\n  content: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    height: '100%',\r\n    width: '100%',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nconst ActivePrimalEventsList = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={classes.content}>\r\n      <ActivePrimalEventsListHeader />\r\n      <ActivePrimalEventsListContent />\r\n      <ActivePrimalEventsListFooter />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ActivePrimalEventsList;\r\n","import { wonderousMagic } from '../../events/eventComponents/wonderousMagicEvent.component';\r\nimport { rollPercentile, rollTableDice } from '../../random';\r\nimport { makeVariable } from '../activePrimalEvents/activePrimalEventsState';\r\nimport { generateDialogEvent } from '../manualTrigger/manualTriggerState.thunk';\r\nimport {\r\n  calculateIncrementAndMax,\r\n  primalStormInitialState,\r\n  primalStormStateSelector,\r\n  setPrimalStormCurrentChance,\r\n} from '../primalStorm/primalStormState';\r\nimport {\r\n  setTriggerDialogState,\r\n  stormTrigerType,\r\n  triggerDialogInitialState,\r\n} from '../triggerDialog/triggerDialogState';\r\nimport {\r\n  alwaysSelectSameEventSelector,\r\n  alwaysSelectSameRodResultSelector,\r\n  eventAlwaysSelectedSelector,\r\n  eventsAlwaysTriggerSelector,\r\n  rodOfWonderAlwaysSelectedSelector,\r\n} from '../userSettings/userSetingsState';\r\nimport { currentRoundSelector, incrementRound } from './roundsState';\r\n\r\n// Thunk that handles all state when pressing the advance round button\r\n// Increments the round number\r\n// Then, if primal magic storm is on, generates the dialog state and event state if roll is high enough\r\n//  and opens the event dialog (this functionality comes later)\r\nexport const advanceRoundThunk = () => (dispatch, getState) => {\r\n  const state = getState();\r\n  dispatch(incrementRound());\r\n\r\n  const {\r\n    active,\r\n    suppressed,\r\n    leftArea,\r\n    currentChance,\r\n  } = primalStormStateSelector(state);\r\n\r\n  if (!active) {\r\n    return;\r\n  }\r\n\r\n  const { increment, max } = calculateIncrementAndMax(suppressed, leftArea);\r\n\r\n  let newChance = Math.min(max, currentChance + increment);\r\n  const currentThreshold = Math.min(max, currentChance);\r\n\r\n  const percentile = rollPercentile();\r\n  const currentCrVariable = makeVariable(3, 1, 11); // 1d3+11 = CR (between 12 and 14);\r\n\r\n  const dialogState = {\r\n    ...triggerDialogInitialState,\r\n    open: true,\r\n    triggerType: stormTrigerType,\r\n    percentile,\r\n    cr: currentCrVariable.result,\r\n    threshold: currentThreshold,\r\n  };\r\n\r\n  const eventsAlwaysTrigger = eventsAlwaysTriggerSelector(state);\r\n\r\n  if (eventsAlwaysTrigger || percentile <= currentThreshold) {\r\n    // Chance drops back to default when an event is triggered\r\n    newChance = leftArea ? 0 : increment;\r\n\r\n    // Need to use current round +1 because we incremented the round above\r\n    const currentRound = currentRoundSelector(state) + 1;\r\n    const alwaysShowSameEvent = alwaysSelectSameEventSelector(state);\r\n    const eventAlwaysSelected = alwaysShowSameEvent\r\n      ? eventAlwaysSelectedSelector(state)\r\n      : undefined;\r\n    const alwaysShowSameRodResult = alwaysSelectSameRodResultSelector(state);\r\n    const rodOfWonderResultAlwaysSelected =\r\n      eventAlwaysSelected === wonderousMagic.title && alwaysShowSameRodResult\r\n        ? rodOfWonderAlwaysSelectedSelector(state)\r\n        : undefined;\r\n\r\n    const eventPercentile = rollPercentile();\r\n    const tableRoll = rollTableDice();\r\n    const event = generateDialogEvent(\r\n      eventPercentile,\r\n      tableRoll,\r\n      currentCrVariable,\r\n      currentRound,\r\n      eventAlwaysSelected,\r\n      rodOfWonderResultAlwaysSelected,\r\n      dialogState.triggerType\r\n    );\r\n    dialogState.currentEvent = event;\r\n  }\r\n\r\n  dispatch(setPrimalStormCurrentChance(newChance));\r\n  dispatch(setTriggerDialogState(dialogState));\r\n};\r\n","import {\r\n  resetPrimalStormState,\r\n  setPrimalStormActive,\r\n} from './primalStormState';\r\n\r\nexport const activatePrimalStormThunk = isActive => dispatch => {\r\n  dispatch(setPrimalStormActive(isActive));\r\n\r\n  if (!isActive) {\r\n    dispatch(resetPrimalStormState());\r\n  }\r\n};\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  Checkbox,\r\n  Divider,\r\n  FormControlLabel,\r\n  makeStyles,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport React, { Fragment } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  primalStormStateSelector,\r\n  setPrimalStormLeftArea,\r\n  setPrimalStormSuppressed,\r\n} from '../state/primalStorm/primalStormState';\r\nimport { activatePrimalStormThunk } from '../state/primalStorm/primalStormState.thunk';\r\n\r\nfunction getColor(value) {\r\n  //value from 0 to 1\r\n  var hue = ((1 - value) * 120).toString(10);\r\n  return ['hsl(', hue, ',60%,50%)'].join('');\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  content: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'flex-start',\r\n  },\r\n  divider: {\r\n    width: '100%',\r\n  },\r\n  currentChanceContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  currentChanceText: {\r\n    marginLeft: 16,\r\n  },\r\n  currentChanceAvatar: {\r\n    backgroundColor: ({ value }) => getColor(value),\r\n    marginLeft: 10,\r\n    fontSize: '15px',\r\n    color: 'black',\r\n  },\r\n});\r\n\r\nconst PrimalStormContent = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { active, suppressed, leftArea, currentChance } = useSelector(\r\n    primalStormStateSelector\r\n  );\r\n\r\n  const classes = useStyles({ value: currentChance / 100 });\r\n\r\n  const enablePrimalStorm = event => {\r\n    const value = event.target.checked;\r\n    dispatch(activatePrimalStormThunk(value));\r\n  };\r\n\r\n  const suppressPrimalStorm = event => {\r\n    const value = event.target.checked;\r\n    dispatch(setPrimalStormSuppressed(value));\r\n  };\r\n\r\n  const leavePrimalStorm = event => {\r\n    const value = event.target.checked;\r\n    dispatch(setPrimalStormLeftArea(value));\r\n  };\r\n\r\n  const makeCheckboxWithTooltip = (label, toolTip, checked, onChange) => (\r\n    <Tooltip placement=\"left\" title={toolTip}>\r\n      <FormControlLabel\r\n        label={label}\r\n        labelPlacement=\"start\"\r\n        control={\r\n          <Checkbox color=\"default\" checked={checked} onChange={onChange} />\r\n        }\r\n      />\r\n    </Tooltip>\r\n  );\r\n\r\n  return (\r\n    <Box className={classes.content}>\r\n      <FormControlLabel\r\n        label=\"Enable Primal Storm\"\r\n        labelPlacement=\"start\"\r\n        control={\r\n          <Checkbox\r\n            color=\"default\"\r\n            checked={active}\r\n            onChange={enablePrimalStorm}\r\n          />\r\n        }\r\n      />\r\n      {active && (\r\n        <Fragment>\r\n          <Divider className={classes.divider} />\r\n          {makeCheckboxWithTooltip(\r\n            'Storm Suppressed',\r\n            'If the weather is suppressed by any means, the ' +\r\n              'chance increases by 5% per round to a maximum of 50%',\r\n            suppressed,\r\n            suppressPrimalStorm\r\n          )}\r\n          {makeCheckboxWithTooltip(\r\n            'Left Storm Area',\r\n            'If all creatures leave the area of the storm the ' +\r\n              'chance is reduced to 50% if higher, or remains ' +\r\n              'static if lower. It reduces to 0% when an event ' +\r\n              'triggers',\r\n            leftArea,\r\n            leavePrimalStorm\r\n          )}\r\n          <Box className={classes.currentChanceContainer}>\r\n            <Typography className={classes.currentChanceText}>\r\n              Current Primal Event Chance:\r\n            </Typography>\r\n            <Avatar className={classes.currentChanceAvatar}>\r\n              {currentChance}%\r\n            </Avatar>\r\n          </Box>\r\n        </Fragment>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PrimalStormContent;\r\n","import React from 'react';\r\nimport {\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  makeStyles,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { currentRoundSelector } from '../state/rounds/roundsState';\r\nimport { resetAll } from '../state/app/primalMagic.reducer';\r\nimport { primalStormHeader } from '../common/colours';\r\nimport PrimalStormContent from './primalStormContent.component';\r\nimport { resetOnlyResetsRoundsSelector } from '../state/userSettings/userSetingsState';\r\n\r\nconst useStyles = makeStyles({\r\n  content: {\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n  roundsContent: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-start',\r\n  },\r\n  resetButton: {\r\n    width: 130,\r\n    height: 30,\r\n    margin: 20,\r\n  },\r\n  currentRoundDisplay: {\r\n    margin: 20,\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start',\r\n  },\r\n  roundAvatar: {\r\n    backgroundColor: primalStormHeader,\r\n    height: 30,\r\n    width: 30,\r\n    marginLeft: 10,\r\n  },\r\n});\r\n\r\nconst RoundsContent = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const currentRound = useSelector(currentRoundSelector);\r\n  const onlyRoundsSetting = useSelector(resetOnlyResetsRoundsSelector);\r\n  const toolTip = onlyRoundsSetting\r\n    ? 'Resets only rounds. Primal storm and active events preserved'\r\n    : 'Resets rounds, primal storm and active events';\r\n\r\n  const onResetClicked = () => {\r\n    dispatch(resetAll());\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.content}>\r\n      <Box className={classes.roundsContent}>\r\n        <Box className={classes.currentRoundDisplay}>\r\n          <Typography>Current Round: </Typography>\r\n          <Avatar className={classes.roundAvatar}>{currentRound}</Avatar>\r\n        </Box>\r\n        <Tooltip title={toolTip}>\r\n          <Button\r\n            className={classes.resetButton}\r\n            variant=\"contained\"\r\n            onClick={onResetClicked}\r\n          >\r\n            Reset\r\n          </Button>\r\n        </Tooltip>\r\n      </Box>\r\n      <PrimalStormContent />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default RoundsContent;\r\n","import { Box, Button, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport BarHeader from '../common/barHeader.component';\r\nimport { primalStormHeader } from '../common/colours';\r\nimport { advanceRoundThunk } from '../state/rounds/roundsState.thunk';\r\nimport RoundsContent from './roundsContent.component';\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    height: '100%',\r\n    width: '100%',\r\n    alignItems: 'center',\r\n  },\r\n  footer: {\r\n    margin: 20,\r\n  },\r\n});\r\n\r\nconst RoundsBar = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const onNextRoundClicked = () => {\r\n    dispatch(advanceRoundThunk());\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.container}>\r\n      <BarHeader title=\"Rounds & Primal Storm\" colour={primalStormHeader} />\r\n      <RoundsContent />\r\n      <Box className={classes.footer}>\r\n        <Button variant=\"contained\" onClick={onNextRoundClicked}>\r\n          Next Round\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default RoundsBar;\r\n","// Thunk that handles all state when pressing the confirm button in a trigger dialog\r\n\r\nimport { twoSimultaneousEvents } from '../../events/eventComponents/twoSimlultaneousEvents/twoSimultaneousEventsEvent.component';\r\nimport { wonderousMagic } from '../../events/eventComponents/wonderousMagicEvent.component';\r\nimport { rollPercentile, rollTableDice } from '../../random';\r\nimport {\r\n  addActivePrimalEvent,\r\n  reRollVariable,\r\n} from '../activePrimalEvents/activePrimalEventsState';\r\nimport { allExpandedSelector } from '../eventExpansionState/eventExpansionState';\r\nimport { specifiedCrSelector } from '../manualTrigger/manualTriggerState';\r\nimport {\r\n  calculateFinalRound,\r\n  generateDialogEvent,\r\n  generateEventVariablesWithDefaults,\r\n} from '../manualTrigger/manualTriggerState.thunk';\r\nimport { currentRoundSelector } from '../rounds/roundsState';\r\nimport {\r\n  alwaysSelectSameEventSelector,\r\n  alwaysSelectSameRodResultSelector,\r\n  eventAlwaysSelectedSelector,\r\n  rodOfWonderAlwaysSelectedSelector,\r\n} from '../userSettings/userSetingsState';\r\nimport {\r\n  closeTriggerDialog,\r\n  setTriggerDialogState,\r\n  triggerDialogCurrentEventSelector,\r\n  triggerDialogStateSelector,\r\n} from './triggerDialogState';\r\n\r\n// Adds the trigger dialog's current event to the active primal events then wipes the dialog to close it\r\nexport const confirmDialogPrimalEventThunk = () => (dispatch, getState) => {\r\n  const state = getState();\r\n  const currentEvent = triggerDialogCurrentEventSelector(state);\r\n  const allExpanded = allExpandedSelector(state);\r\n  const dispatchedEvent = {\r\n    ...currentEvent,\r\n    expanded: !!allExpanded,\r\n  };\r\n  dispatch(addActivePrimalEvent(dispatchedEvent));\r\n  dispatch(closeTriggerDialog());\r\n};\r\n\r\n// Thunk that handles all state when pressing the re-roll event button in a trigger dialog\r\n// Re-rolls the primal magic event based on the current dialog settings and updates the dialog state\r\nexport const rerollDialogPrimalEventThunk = () => (dispatch, getState) => {\r\n  const state = getState();\r\n  const currentDialogState = triggerDialogStateSelector(state);\r\n  const eventPercentile = rollPercentile();\r\n  const tableRoll = rollTableDice();\r\n  const currentCr = specifiedCrSelector(state);\r\n  const currentRound = currentRoundSelector(state);\r\n  const alwaysShowSameEvent = alwaysSelectSameEventSelector(state);\r\n  const eventAlwaysSelected = alwaysShowSameEvent\r\n    ? eventAlwaysSelectedSelector(state)\r\n    : undefined;\r\n  const alwaysShowSameRodResult = alwaysSelectSameRodResultSelector(state);\r\n  const rodOfWonderResultAlwaysSelected =\r\n    eventAlwaysSelected === wonderousMagic.title && alwaysShowSameRodResult\r\n      ? rodOfWonderAlwaysSelectedSelector(state)\r\n      : undefined;\r\n  const event = generateDialogEvent(\r\n    eventPercentile,\r\n    tableRoll,\r\n    currentCr,\r\n    currentRound,\r\n    eventAlwaysSelected,\r\n    rodOfWonderResultAlwaysSelected,\r\n    currentDialogState.triggerType\r\n  );\r\n  event.expanded = currentDialogState.currentEvent.expanded;\r\n  const newDialogState = {\r\n    ...currentDialogState,\r\n    currentEvent: event,\r\n  };\r\n\r\n  dispatch(setTriggerDialogState(newDialogState));\r\n};\r\n\r\n// Thunk that handles all state when pressing the re-roll event variables button in a trigger dialog\r\n// Keeps the current primal magic event but re-rolls any variables\r\nexport const rerollDialogPrimalEventVariablesThunk = () => (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const state = getState();\r\n  const currentDialogState = triggerDialogStateSelector(state);\r\n  const currentEvent = currentDialogState.currentEvent;\r\n\r\n  let newVariables = {};\r\n\r\n  if (currentEvent.title === wonderousMagic.title) {\r\n    // Because wonderous magic has an inner table we need to handle it separately\r\n    // We must completely reroll the variables object, not just each variable\r\n    const alwaysShowSameRodResult = alwaysSelectSameRodResultSelector(state);\r\n    const rodOfWonderResultAlwaysSelected = alwaysShowSameRodResult\r\n      ? rodOfWonderAlwaysSelectedSelector(state)\r\n      : undefined;\r\n    newVariables = generateEventVariablesWithDefaults(\r\n      wonderousMagic,\r\n      currentEvent.cr.result,\r\n      rodOfWonderResultAlwaysSelected\r\n    );\r\n  } else if (currentEvent.title === twoSimultaneousEvents.title) {\r\n    // Because two simultaneous events has two events inside which need variables rerolling\r\n    // we need to completely re roll the variables object, not just each variable\r\n    newVariables = generateEventVariablesWithDefaults(\r\n      twoSimultaneousEvents,\r\n      currentEvent.cr.result\r\n    );\r\n  } else {\r\n    Object.entries(currentEvent.variables).forEach(([key, variable]) => {\r\n      newVariables[key] = reRollVariable(variable);\r\n    });\r\n  }\r\n\r\n  const newDialogState = {\r\n    ...currentDialogState,\r\n    currentEvent: {\r\n      ...currentEvent,\r\n      variables: newVariables,\r\n      finalRound: calculateFinalRound(\r\n        newVariables.duration,\r\n        currentEvent.startRound\r\n      ),\r\n    },\r\n  };\r\n\r\n  dispatch(setTriggerDialogState(newDialogState));\r\n};\r\n","import {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  makeStyles,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport React, { Fragment } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  manualTriggerHeader,\r\n  manualTriggerHeaderEmphasis,\r\n  primalStormHeader,\r\n  primalStormHeaderEmphasis,\r\n} from '../common/colours';\r\nimport {\r\n  closeTriggerDialog,\r\n  manualTriggerType,\r\n  toggleTriggerDialogPrimalEventExpanded,\r\n  triggerDialogStateSelector,\r\n} from '../state/triggerDialog/triggerDialogState';\r\nimport { eventsAlwaysTriggerSelector } from '../state/userSettings/userSetingsState';\r\nimport EventCard from '../events/eventCard.component';\r\nimport SyncIcon from '@material-ui/icons/Sync';\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport { getEventCardContent } from '../events/events';\r\nimport {\r\n  confirmDialogPrimalEventThunk,\r\n  rerollDialogPrimalEventThunk,\r\n  rerollDialogPrimalEventVariablesThunk,\r\n} from '../state/triggerDialog/triggerDialogState.thunk';\r\nimport VM from '../common/variableMark.component';\r\nimport {\r\n  calculateIncrementAndMax,\r\n  primalStormStateSelector,\r\n} from '../state/primalStorm/primalStormState';\r\n\r\nconst getBackgroundColour = isManualTrigger =>\r\n  isManualTrigger ? manualTriggerHeader : primalStormHeader;\r\n\r\nconst getEmphasisColour = isManualTrigger =>\r\n  isManualTrigger ? manualTriggerHeaderEmphasis : primalStormHeaderEmphasis;\r\n\r\nconst useStyles = makeStyles({\r\n  dialogHeader: {\r\n    backgroundColor: ({ isManualTrigger }) =>\r\n      getBackgroundColour(isManualTrigger),\r\n    color: 'white',\r\n    textAlign: 'center',\r\n  },\r\n  eventOccurrance: {\r\n    fontWeight: 'bold',\r\n  },\r\n  cardHeader: {\r\n    backgroundColor: ({ isManualTrigger }) =>\r\n      getBackgroundColour(isManualTrigger),\r\n    color: 'white',\r\n    paddingTop: 3,\r\n    paddingBottom: 3,\r\n  },\r\n  reRollButton: {\r\n    margin: 5,\r\n    color: blue[500],\r\n    justifySelf: 'center',\r\n  },\r\n  reRollContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n  },\r\n  confirmButton: {\r\n    backgroundColor: ({ isManualTrigger }) =>\r\n      getBackgroundColour(isManualTrigger),\r\n    color: 'white',\r\n    '&:hover': {\r\n      backgroundColor: ({ isManualTrigger }) =>\r\n        getEmphasisColour(isManualTrigger),\r\n    },\r\n  },\r\n});\r\n\r\nconst getChanceMessage = (eventOccurred, primalStormState, threshold) => {\r\n  const { suppressed, leftArea, currentChance } = primalStormState;\r\n  const { increment, max } = calculateIncrementAndMax(suppressed, leftArea);\r\n  const isCapped = currentChance >= max && threshold >= max;\r\n\r\n  if (eventOccurred) {\r\n    if (leftArea) {\r\n      return `Chance next round reset to ${currentChance}% (left area)`;\r\n    }\r\n\r\n    return `Chance next round reset to ${currentChance}%${\r\n      suppressed ? ' (suppressed)' : ''\r\n    }`;\r\n  } else {\r\n    if (leftArea) {\r\n      return `Chance next round remains at ${currentChance}% (left area)`;\r\n    }\r\n\r\n    if (isCapped) {\r\n      return `Chance next round capped at ${max}%${\r\n        suppressed ? ' (suppressed)' : ''\r\n      }`;\r\n    }\r\n\r\n    return `Chance next round increased by ${increment}%${\r\n      suppressed ? ' (suppressed)' : ''\r\n    } to ${currentChance}%`;\r\n  }\r\n};\r\n\r\nconst PrimalEventDialog = () => {\r\n  const dispatch = useDispatch();\r\n  const {\r\n    percentile,\r\n    threshold,\r\n    triggerType,\r\n    open,\r\n    currentEvent,\r\n  } = useSelector(triggerDialogStateSelector);\r\n  const isManualTrigger = triggerType === manualTriggerType;\r\n  const classes = useStyles({ isManualTrigger });\r\n  const eventsAlwaysTriggered = useSelector(eventsAlwaysTriggerSelector);\r\n\r\n  const eventOccurred = percentile <= threshold;\r\n  const showEventContent = eventOccurred || eventsAlwaysTriggered;\r\n  let eventOccuranceMessage = `Event did not occur (${percentile}%, <=${threshold}% required)`;\r\n\r\n  if (eventOccurred) {\r\n    eventOccuranceMessage = `Event occurred (${percentile}%, <=${threshold}% achieved)`;\r\n  }\r\n\r\n  const primalStormState = useSelector(primalStormStateSelector);\r\n  const chanceMessage = getChanceMessage(\r\n    eventOccurred,\r\n    primalStormState,\r\n    threshold\r\n  );\r\n\r\n  const onAcceptClicked = () => {\r\n    dispatch(confirmDialogPrimalEventThunk());\r\n  };\r\n\r\n  const onCloseDialogClicked = () => {\r\n    dispatch(closeTriggerDialog());\r\n  };\r\n\r\n  const onReRollEventClicked = () => {\r\n    dispatch(rerollDialogPrimalEventThunk());\r\n  };\r\n\r\n  const onReRollEventVariablesClicked = () => {\r\n    dispatch(rerollDialogPrimalEventVariablesThunk());\r\n  };\r\n\r\n  const onExpandToggleClicked = () => {\r\n    dispatch(toggleTriggerDialogPrimalEventExpanded());\r\n  };\r\n\r\n  if (!open) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      maxWidth=\"md\"\r\n      fullWidth\r\n      open={open}\r\n      onClose={\r\n        eventOccurred || eventsAlwaysTriggered\r\n          ? undefined\r\n          : onCloseDialogClicked\r\n      }\r\n    >\r\n      <DialogTitle className={classes.dialogHeader}>\r\n        {isManualTrigger ? 'Manual' : 'Storm'} Primal Event Trigger\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <Typography className={classes.eventOccurrance}>\r\n          {eventOccuranceMessage}\r\n        </Typography>\r\n        {isManualTrigger && !eventOccurred && !eventsAlwaysTriggered && (\r\n          <Typography variant=\"caption\">\r\n            [TRIGGERING MAGIC HAPPENS AS NORMAL]\r\n          </Typography>\r\n        )}\r\n        {!eventOccurred && eventsAlwaysTriggered && (\r\n          <Typography variant=\"caption\">\r\n            [BUT WAS FORCED TO OCCUR BY USER SETTINGS]\r\n          </Typography>\r\n        )}\r\n        {!isManualTrigger && (\r\n          <Typography className={classes.eventOccurrance}>\r\n            {chanceMessage}\r\n          </Typography>\r\n        )}\r\n        {showEventContent && (\r\n          <Fragment>\r\n            <Typography>\r\n              CR: <VM v={currentEvent.cr} />\r\n            </Typography>\r\n          </Fragment>\r\n        )}\r\n        {showEventContent && (\r\n          <Fragment>\r\n            <Box className={classes.reRollContainer}>\r\n              <Button\r\n                className={classes.reRollButton}\r\n                startIcon={<SyncIcon />}\r\n                onClick={onReRollEventClicked}\r\n              >\r\n                Re-Roll (Event)\r\n              </Button>\r\n              <Button\r\n                className={classes.reRollButton}\r\n                startIcon={<ReplayIcon />}\r\n                onClick={onReRollEventVariablesClicked}\r\n              >\r\n                Re-Roll (Event Variables)\r\n              </Button>\r\n            </Box>\r\n            <EventCard\r\n              event={currentEvent}\r\n              titleColour={\r\n                isManualTrigger ? manualTriggerHeader : primalStormHeader\r\n              }\r\n              onExpandToggleClicked={onExpandToggleClicked}\r\n              getEventCardContent={getEventCardContent}\r\n            />\r\n          </Fragment>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {showEventContent && (\r\n          <Button\r\n            className={classes.confirmButton}\r\n            variant=\"contained\"\r\n            onClick={onAcceptClicked}\r\n          >\r\n            Trigger Event\r\n          </Button>\r\n        )}\r\n        <Button variant=\"contained\" onClick={onCloseDialogClicked}>\r\n          {showEventContent ? 'Do Not Trigger' : 'Phew...'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default PrimalEventDialog;\r\n","import React from 'react';\r\nimport { makeStyles, Paper } from '@material-ui/core';\r\nimport { grey } from '@material-ui/core/colors';\r\nimport ManualTriggerBar from '../manualTriggerBar/manualTrigger.component';\r\nimport ActivePrimalEventsList from '../activePrimalEventsList/activePrimalEventsList.component';\r\nimport RoundsBar from '../roundsBar/roundsBar.component';\r\nimport PrimalEventDialog from '../primalEventDialog/primalEventDialog.component';\r\n\r\nconst useStyles = makeStyles({\r\n  contentContainer: {\r\n    height: 'calc(100vh - 20px)',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    backgroundColor: grey[100],\r\n  },\r\n  buttonPage: {\r\n    margin: 10,\r\n    width: '20%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  page: {\r\n    margin: 10,\r\n    width: '50%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  pinnedEventsPage: {\r\n    margin: 10,\r\n    width: '20%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nconst PrimalEventPage = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.contentContainer}>\r\n      <Paper elevation={3} variant=\"outlined\" className={classes.buttonPage}>\r\n        <ManualTriggerBar />\r\n      </Paper>\r\n      <Paper elevation={3} variant=\"outlined\" className={classes.page}>\r\n        <ActivePrimalEventsList />\r\n      </Paper>\r\n      <Paper\r\n        elevation={3}\r\n        variant=\"outlined\"\r\n        className={classes.pinnedEventsPage}\r\n      >\r\n        <RoundsBar />\r\n      </Paper>\r\n      <PrimalEventDialog />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrimalEventPage;\r\n","import React from 'react';\r\nimport { routerMiddleware, ConnectedRouter } from 'connected-react-router';\r\nimport { Route, Switch } from 'react-router';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport * as log from 'loglevel';\r\nimport { createLogger } from 'redux-logger';\r\nimport thunk from 'redux-thunk';\r\nimport { Provider } from 'react-redux';\r\nimport { createHashHistory } from 'history';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { buildTheme } from './styles/theming';\r\nimport AppReducer from './state/app/App.reducer';\r\nimport Homepage from './homepage/homepage.component';\r\nimport PageNotFoundError from './errorPages/pageNotFoundError.component';\r\nimport persistReducer from 'redux-persist/es/persistReducer';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport persistStore from 'redux-persist/es/persistStore';\r\nimport PrimalEventPage from './primalEventPage/primalEventPage.component';\r\n\r\nconst history = createHashHistory();\r\nconst middleware = [thunk, routerMiddleware(history)];\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  const logger = createLogger();\r\n  middleware.push(logger);\r\n  log.setDefaultLevel(log.levels.DEBUG);\r\n} else {\r\n  log.setDefaultLevel(log.levels.ERROR);\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(\r\n  persistReducer({ key: 'root', storage }, AppReducer(history)),\r\n  composeEnhancers(applyMiddleware(...middleware))\r\n);\r\nconst persistor = persistStore(store);\r\n\r\nconst pageContent = () => (\r\n  <Switch>\r\n    <Route exact path={'/'} render={() => <Homepage />} />\r\n    <Route\r\n      exact\r\n      path={'/PrimalMagicTracker'}\r\n      render={() => <PrimalEventPage />}\r\n    />\r\n    <Route render={() => <PageNotFoundError />} />\r\n  </Switch>\r\n);\r\n\r\nconst App = () => {\r\n  return (\r\n    <div>\r\n      <Provider store={store}>\r\n        <PersistGate persistor={persistor} loading={null}>\r\n          <ConnectedRouter history={history}>\r\n            <MuiThemeProvider theme={buildTheme()}>\r\n              {pageContent()}\r\n            </MuiThemeProvider>\r\n          </ConnectedRouter>\r\n        </PersistGate>\r\n      </Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nexport const buildTheme = () => {\r\n  const options = {\r\n    typography: {\r\n      useNextVariants: true,\r\n      singleRiskView: {\r\n        fontSize: 20,\r\n        padding: '10px',\r\n        margin: 'auto',\r\n        textAlign: 'left',\r\n      },\r\n    },\r\n    textField: {\r\n      padding: '0px',\r\n    },\r\n    slider: {\r\n      padding: '10px',\r\n      margin: '-10px',\r\n    },\r\n    select: {\r\n      padding: '10px',\r\n    },\r\n    tabs: {\r\n      padding: '10px',\r\n    },\r\n    formControl: {\r\n      padding: '10px',\r\n    },\r\n  };\r\n\r\n  return createMuiTheme(options);\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'typeface-roboto';\r\n\r\nconst appToRender = () => {\r\n  ReactDOM.render(<App />, document.getElementById('root'));\r\n};\r\n\r\nappToRender();\r\n"],"sourceRoot":""}